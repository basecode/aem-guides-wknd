/*******************************************************************************
 * Copyright 2019 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

/**
 * Element.matches()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/matches#Polyfill
 */
if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
}

// eslint-disable-next-line valid-jsdoc
/**
 * Element.closest()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/closest#Polyfill
 */
if (!Element.prototype.closest) {
    Element.prototype.closest = function(s) {
        "use strict";
        var el = this;
        if (!document.documentElement.contains(el)) {
            return null;
        }
        do {
            if (el.matches(s)) {
                return el;
            }
            el = el.parentElement || el.parentNode;
        } while (el !== null && el.nodeType === 1);
        return null;
    };
}

/*******************************************************************************
 * Copyright 2019 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var dataLayerEnabled = document.body.hasAttribute("data-cmp-data-layer-enabled");
    var dataLayer = (dataLayerEnabled)? window.adobeDataLayer = window.adobeDataLayer || [] : undefined;

    var NS = "cmp";
    var IS = "accordion";

    var keyCodes = {
        ENTER: 13,
        SPACE: 32,
        END: 35,
        HOME: 36,
        ARROW_LEFT: 37,
        ARROW_UP: 38,
        ARROW_RIGHT: 39,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]'
    };

    var cssClasses = {
        button: {
            disabled: "cmp-accordion__button--disabled",
            expanded: "cmp-accordion__button--expanded"
        },
        panel: {
            hidden: "cmp-accordion__panel--hidden",
            expanded: "cmp-accordion__panel--expanded"
        }
    };

    var dataAttributes = {
        item: {
            expanded: "data-cmp-expanded"
        }
    };

    var properties = {
        /**
         * Determines whether a single accordion item is forced to be expanded at a time.
         * Expanding one item will collapse all others.
         *
         * @memberof Accordion
         * @type {Boolean}
         * @default false
         */
        "singleExpansion": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        }
    };

    /**
     * Accordion Configuration.
     *
     * @typedef {Object} AccordionConfig Represents an Accordion configuration
     * @property {HTMLElement} element The HTMLElement representing the Accordion
     * @property {Object} options The Accordion options
     */

    /**
     * Accordion.
     *
     * @class Accordion
     * @classdesc An interactive Accordion component for toggling panels of related content
     * @param {AccordionConfig} config The Accordion configuration
     */
    function Accordion(config) {
        var that = this;

        if (config && config.element) {
            init(config);
        }

        /**
         * Initializes the Accordion.
         *
         * @private
         * @param {AccordionConfig} config The Accordion configuration
         */
        function init(config) {
            that._config = config;

            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            setupProperties(config.options);
            cacheElements(config.element);

            if (that._elements["item"]) {
                // ensures multiple element types are arrays.
                that._elements["item"] = Array.isArray(that._elements["item"]) ? that._elements["item"] : [that._elements["item"]];
                that._elements["button"] = Array.isArray(that._elements["button"]) ? that._elements["button"] : [that._elements["button"]];
                that._elements["panel"] = Array.isArray(that._elements["panel"]) ? that._elements["panel"] : [that._elements["panel"]];

                // Expand the item based on deep-link-id if it matches with any existing accordion item id
                var deepLinkItem = CQ.CoreComponents.container.utils.getDeepLinkItem(that, "item");
                if (deepLinkItem && !deepLinkItem.hasAttribute(dataAttributes.item.expanded)) {
                    setItemExpanded(deepLinkItem, true);
                }

                if (that._properties.singleExpansion) {
                    // No deep linking
                    if (!deepLinkItem) {
                        var expandedItems = getExpandedItems();
                        // no expanded item annotated, force the first item to display.
                        if (expandedItems.length === 0) {
                            toggle(0);
                        }
                        // multiple expanded items annotated, display the last item open.
                        if (expandedItems.length > 1) {
                            toggle(expandedItems.length - 1);
                        }
                    } else {
                        // Deep link case
                        // Collapse the items other than which is deep linked
                        for (var j = 0; j < that._elements["item"].length; j++) {
                            if (that._elements["item"][j].id !== deepLinkItem.id &&
                                that._elements["item"][j].hasAttribute(dataAttributes.item.expanded)) {
                                setItemExpanded(that._elements["item"][j], false);
                            }
                        }
                    }
                }

                refreshItems();
                bindEvents();

                if (window.Granite && window.Granite.author && window.Granite.author.MessageChannel) {
                    /*
                     * Editor message handling:
                     * - subscribe to "cmp.panelcontainer" message requests sent by the editor frame
                     * - check that the message data panel container type is correct and that the id (path) matches this specific Accordion component
                     * - if so, route the "navigate" operation to enact a navigation of the Accordion based on index data
                     */
                    new window.Granite.author.MessageChannel("cqauthor", window).subscribeRequestMessage("cmp.panelcontainer", function(message) {
                        if (message.data && message.data.type === "cmp-accordion" && message.data.id === that._elements.self.dataset["cmpPanelcontainerId"]) {
                            if (message.data.operation === "navigate") {
                                // switch to single expansion mode when navigating in edit mode.
                                var singleExpansion = that._properties.singleExpansion;
                                that._properties.singleExpansion = true;
                                toggle(message.data.index);

                                // revert to the configured state.
                                that._properties.singleExpansion = singleExpansion;
                            }
                        }
                    });
                }
            }
        }

        /**
         * Caches the Accordion elements as defined via the {@code data-accordion-hook="ELEMENT_NAME"} markup API.
         *
         * @private
         * @param {HTMLElement} wrapper The Accordion wrapper element
         */
        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                if (hook.closest("." + NS + "-" + IS) === that._elements.self) { // only process own accordion elements
                    var capitalized = IS;
                    capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                    var key = hook.dataset[NS + "Hook" + capitalized];
                    if (that._elements[key]) {
                        if (!Array.isArray(that._elements[key])) {
                            var tmp = that._elements[key];
                            that._elements[key] = [tmp];
                        }
                        that._elements[key].push(hook);
                    } else {
                        that._elements[key] = hook;
                    }
                }
            }
        }

        /**
         * Sets up properties for the Accordion based on the passed options.
         *
         * @private
         * @param {Object} options The Accordion options
         */
        function setupProperties(options) {
            that._properties = {};

            for (var key in properties) {
                if (properties.hasOwnProperty(key)) {
                    var property = properties[key];
                    var value = null;

                    if (options && options[key] != null) {
                        value = options[key];

                        // transform the provided option
                        if (property && typeof property.transform === "function") {
                            value = property.transform(value);
                        }
                    }

                    if (value === null) {
                        // value still null, take the property default
                        value = properties[key]["default"];
                    }

                    that._properties[key] = value;
                }
            }
        }

        /**
         * Binds Accordion event handling.
         *
         * @private
         */
        function bindEvents() {
            var buttons = that._elements["button"];
            if (buttons) {
                for (var i = 0; i < buttons.length; i++) {
                    (function(index) {
                        buttons[i].addEventListener("click", function(event) {
                            toggle(index);
                            focusButton(index);
                        });
                        buttons[i].addEventListener("keydown", function(event) {
                            onButtonKeyDown(event, index);
                        });
                    })(i);
                }
            }
        }

        /**
         * Handles button keydown events.
         *
         * @private
         * @param {Object} event The keydown event
         * @param {Number} index The index of the button triggering the event
         */
        function onButtonKeyDown(event, index) {
            var lastIndex = that._elements["button"].length - 1;

            switch (event.keyCode) {
                case keyCodes.ARROW_LEFT:
                case keyCodes.ARROW_UP:
                    event.preventDefault();
                    if (index > 0) {
                        focusButton(index - 1);
                    }
                    break;
                case keyCodes.ARROW_RIGHT:
                case keyCodes.ARROW_DOWN:
                    event.preventDefault();
                    if (index < lastIndex) {
                        focusButton(index + 1);
                    }
                    break;
                case keyCodes.HOME:
                    event.preventDefault();
                    focusButton(0);
                    break;
                case keyCodes.END:
                    event.preventDefault();
                    focusButton(lastIndex);
                    break;
                case keyCodes.ENTER:
                case keyCodes.SPACE:
                    event.preventDefault();
                    toggle(index);
                    focusButton(index);
                    break;
                default:
                    return;
            }
        }

        /**
         * General handler for toggle of an item.
         *
         * @private
         * @param {Number} index The index of the item to toggle
         */
        function toggle(index) {
            var item = that._elements["item"][index];
            if (item) {
                if (that._properties.singleExpansion) {
                    // ensure only a single item is expanded if single expansion is enabled.
                    for (var i = 0; i < that._elements["item"].length; i++) {
                        if (that._elements["item"][i] !== item) {
                            var expanded = getItemExpanded(that._elements["item"][i]);
                            if (expanded) {
                                setItemExpanded(that._elements["item"][i], false);
                            }
                        }
                    }
                    setItemExpanded(item, true);
                } else {
                    setItemExpanded(item, !getItemExpanded(item));
                }

                if (dataLayerEnabled) {
                    var accordionId = that._elements.self.id;
                    var expandedItems = getExpandedItems()
                        .map(function(item) {
                            return Object.keys(JSON.parse(item.dataset.cmpDataLayer))[0];
                        });

                    var uploadPayload = {component: {}};
                    uploadPayload.component[accordionId] = { shownItems: expandedItems };

                    var removePayload = {component: {}};
                    removePayload.component[accordionId] = { shownItems: undefined };

                    dataLayer.push(removePayload);
                    dataLayer.push(uploadPayload);
                }
            }
        }

        /**
         * Sets an item's expanded state based on the provided flag and refreshes its internals.
         *
         * @private
         * @param {HTMLElement} item The item to mark as expanded, or not expanded
         * @param {Boolean} expanded true to mark the item expanded, false otherwise
         */
        function setItemExpanded(item, expanded) {
            if (expanded) {
                item.setAttribute(dataAttributes.item.expanded, "");
                if (dataLayerEnabled) {
                    dataLayer.push({
                        event: "cmp:show",
                        eventInfo: {
                            path: "component." + getDataLayerId(item.dataset.cmpDataLayer)
                        }
                    });
                }

            } else {
                item.removeAttribute(dataAttributes.item.expanded);
                if (dataLayerEnabled) {
                    dataLayer.push({
                        event: "cmp:hide",
                        eventInfo: {
                            path: "component." + getDataLayerId(item.dataset.cmpDataLayer)
                        }
                    });
                }
            }
            refreshItem(item);
        }

        /**
         * Gets an item's expanded state.
         *
         * @private
         * @param {HTMLElement} item The item for checking its expanded state
         * @returns {Boolean} true if the item is expanded, false otherwise
         */
        function getItemExpanded(item) {
            return item && item.dataset && item.dataset["cmpExpanded"] !== undefined;
        }

        /**
         * Refreshes an item based on its expanded state.
         *
         * @private
         * @param {HTMLElement} item The item to refresh
         */
        function refreshItem(item) {
            var expanded = getItemExpanded(item);
            if (expanded) {
                expandItem(item);
            } else {
                collapseItem(item);
            }
        }

        /**
         * Refreshes all items based on their expanded state.
         *
         * @private
         */
        function refreshItems() {
            for (var i = 0; i < that._elements["item"].length; i++) {
                refreshItem(that._elements["item"][i]);
            }
        }

        /**
         * Returns all expanded items.
         *
         * @private
         * @returns {HTMLElement[]} The expanded items
         */
        function getExpandedItems() {
            var expandedItems = [];

            for (var i = 0; i < that._elements["item"].length; i++) {
                var item = that._elements["item"][i];
                var expanded = getItemExpanded(item);
                if (expanded) {
                    expandedItems.push(item);
                }
            }

            return expandedItems;
        }

        /**
         * Annotates the item and its internals with
         * the necessary style and accessibility attributes to indicate it is expanded.
         *
         * @private
         * @param {HTMLElement} item The item to annotate as expanded
         */
        function expandItem(item) {
            var index = that._elements["item"].indexOf(item);
            if (index > -1) {
                var button = that._elements["button"][index];
                var panel = that._elements["panel"][index];
                button.classList.add(cssClasses.button.expanded);
                button.setAttribute("aria-expanded", true);
                panel.classList.add(cssClasses.panel.expanded);
                panel.classList.remove(cssClasses.panel.hidden);
                panel.setAttribute("aria-hidden", false);

                if (that._properties.singleExpansion) {
                    button.classList.add(cssClasses.button.disabled);
                    button.setAttribute("aria-disabled", true);
                }
            }
        }

        /**
         * Annotates the item and its internals with
         * the necessary style and accessibility attributes to indicate it is not expanded.
         *
         * @private
         * @param {HTMLElement} item The item to annotate as not expanded
         */
        function collapseItem(item) {
            var index = that._elements["item"].indexOf(item);
            if (index > -1) {
                var button = that._elements["button"][index];
                var panel = that._elements["panel"][index];
                button.classList.remove(cssClasses.button.disabled);
                button.classList.remove(cssClasses.button.expanded);
                button.removeAttribute("aria-disabled");
                button.setAttribute("aria-expanded", false);
                panel.classList.add(cssClasses.panel.hidden);
                panel.classList.remove(cssClasses.panel.expanded);
                panel.setAttribute("aria-hidden", true);
            }
        }

        /**
         * Focuses the button at the provided index.
         *
         * @private
         * @param {Number} index The index of the button to focus
         */
        function focusButton(index) {
            var button = that._elements["button"][index];
            button.focus();
        }
    }

    /**
     * Reads options data from the Accordion wrapper element, defined via {@code data-cmp-*} data attributes.
     *
     * @private
     * @param {HTMLElement} element The Accordion element to read options data from
     * @returns {Object} The options read from the component data attributes
     */
    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    /**
     * Parses the dataLayer string and returns the ID
     *
     * @private
     * @param {String} componentDataLayer the dataLayer string
     * @returns {String} dataLayerId or undefined
     */
    function getDataLayerId(componentDataLayer) {
        return Object.keys(JSON.parse(componentDataLayer))[0];
    }

    /**
     * Document ready handler and DOM mutation observers. Initializes Accordion components as necessary.
     *
     * @private
     */
    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Accordion({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Accordion({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }
}());

/*******************************************************************************
 * Copyright 2018 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/

/**
 * Element.matches()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/matches#Polyfill
 */
if (!Element.prototype.matches) {
    Element.prototype.matches = Element.prototype.msMatchesSelector || Element.prototype.webkitMatchesSelector;
}

// eslint-disable-next-line valid-jsdoc
/**
 * Element.closest()
 * https://developer.mozilla.org/enUS/docs/Web/API/Element/closest#Polyfill
 */
if (!Element.prototype.closest) {
    Element.prototype.closest = function(s) {
        "use strict";
        var el = this;
        if (!document.documentElement.contains(el)) {
            return null;
        }
        do {
            if (el.matches(s)) {
                return el;
            }
            el = el.parentElement || el.parentNode;
        } while (el !== null && el.nodeType === 1);
        return null;
    };
}

/*******************************************************************************
 * Copyright 2018 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var dataLayerEnabled = document.body.hasAttribute("data-cmp-data-layer-enabled");
    var dataLayer = (dataLayerEnabled)? window.adobeDataLayer = window.adobeDataLayer || [] : undefined;

    var NS = "cmp";
    var IS = "tabs";

    var keyCodes = {
        END: 35,
        HOME: 36,
        ARROW_LEFT: 37,
        ARROW_UP: 38,
        ARROW_RIGHT: 39,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        active: {
            tab: "cmp-tabs__tab--active",
            tabpanel: "cmp-tabs__tabpanel--active"
        }
    };

    /**
     * Tabs Configuration
     *
     * @typedef {Object} TabsConfig Represents a Tabs configuration
     * @property {HTMLElement} element The HTMLElement representing the Tabs
     * @property {Object} options The Tabs options
     */

    /**
     * Tabs
     *
     * @class Tabs
     * @classdesc An interactive Tabs component for navigating a list of tabs
     * @param {TabsConfig} config The Tabs configuration
     */
    function Tabs(config) {
        var that = this;

        if (config && config.element) {
            init(config);
        }

        /**
         * Initializes the Tabs
         *
         * @private
         * @param {TabsConfig} config The Tabs configuration
         */
        function init(config) {
            that._config = config;

            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            cacheElements(config.element);
            that._active = getActiveIndex(that._elements["tab"]);

            if (that._elements.tabpanel) {
                refreshActive();
                bindEvents();
            }

            // Show the tab based on deep-link-id if it matches with any existing tab item id
            var deepLinkItemIdx = CQ.CoreComponents.container.utils.getDeepLinkItemIdx(that, "tabpanel");
            if (deepLinkItemIdx) {
                var deepLinkItem = that._elements["tab"][deepLinkItemIdx];
                if (deepLinkItem && that._elements["tab"][that._active].id !== deepLinkItem.id) {
                    navigateAndFocusTab(deepLinkItemIdx);
                }
            }

            if (window.Granite && window.Granite.author && window.Granite.author.MessageChannel) {
                /*
                 * Editor message handling:
                 * - subscribe to "cmp.panelcontainer" message requests sent by the editor frame
                 * - check that the message data panel container type is correct and that the id (path) matches this specific Tabs component
                 * - if so, route the "navigate" operation to enact a navigation of the Tabs based on index data
                 */
                new window.Granite.author.MessageChannel("cqauthor", window).subscribeRequestMessage("cmp.panelcontainer", function(message) {
                    if (message.data && message.data.type === "cmp-tabs" && message.data.id === that._elements.self.dataset["cmpPanelcontainerId"]) {
                        if (message.data.operation === "navigate") {
                            navigate(message.data.index);
                        }
                    }
                });
            }
        }

        /**
         * Returns the index of the active tab, if no tab is active returns 0
         *
         * @param {Array} tabs Tab elements
         * @returns {Number} Index of the active tab, 0 if none is active
         */
        function getActiveIndex(tabs) {
            if (tabs) {
                for (var i = 0; i < tabs.length; i++) {
                    if (tabs[i].classList.contains(selectors.active.tab)) {
                        return i;
                    }
                }
            }
            return 0;
        }

        /**
         * Caches the Tabs elements as defined via the {@code data-tabs-hook="ELEMENT_NAME"} markup API
         *
         * @private
         * @param {HTMLElement} wrapper The Tabs wrapper element
         */
        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                if (hook.closest("." + NS + "-" + IS) === that._elements.self) { // only process own tab elements
                    var capitalized = IS;
                    capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                    var key = hook.dataset[NS + "Hook" + capitalized];
                    if (that._elements[key]) {
                        if (!Array.isArray(that._elements[key])) {
                            var tmp = that._elements[key];
                            that._elements[key] = [tmp];
                        }
                        that._elements[key].push(hook);
                    } else {
                        that._elements[key] = hook;
                    }
                }
            }
        }

        /**
         * Binds Tabs event handling
         *
         * @private
         */
        function bindEvents() {
            var tabs = that._elements["tab"];
            if (tabs) {
                for (var i = 0; i < tabs.length; i++) {
                    (function(index) {
                        tabs[i].addEventListener("click", function(event) {
                            navigateAndFocusTab(index);
                        });
                        tabs[i].addEventListener("keydown", function(event) {
                            onKeyDown(event);
                        });
                    })(i);
                }
            }
        }

        /**
         * Handles tab keydown events
         *
         * @private
         * @param {Object} event The keydown event
         */
        function onKeyDown(event) {
            var index = that._active;
            var lastIndex = that._elements["tab"].length - 1;

            switch (event.keyCode) {
                case keyCodes.ARROW_LEFT:
                case keyCodes.ARROW_UP:
                    event.preventDefault();
                    if (index > 0) {
                        navigateAndFocusTab(index - 1);
                    }
                    break;
                case keyCodes.ARROW_RIGHT:
                case keyCodes.ARROW_DOWN:
                    event.preventDefault();
                    if (index < lastIndex) {
                        navigateAndFocusTab(index + 1);
                    }
                    break;
                case keyCodes.HOME:
                    event.preventDefault();
                    navigateAndFocusTab(0);
                    break;
                case keyCodes.END:
                    event.preventDefault();
                    navigateAndFocusTab(lastIndex);
                    break;
                default:
                    return;
            }
        }

        /**
         * Refreshes the tab markup based on the current {@code Tabs#_active} index
         *
         * @private
         */
        function refreshActive() {
            var tabpanels = that._elements["tabpanel"];
            var tabs = that._elements["tab"];

            if (tabpanels) {
                if (Array.isArray(tabpanels)) {
                    for (var i = 0; i < tabpanels.length; i++) {
                        if (i === parseInt(that._active)) {
                            tabpanels[i].classList.add(selectors.active.tabpanel);
                            tabpanels[i].removeAttribute("aria-hidden");
                            tabs[i].classList.add(selectors.active.tab);
                            tabs[i].setAttribute("aria-selected", true);
                            tabs[i].setAttribute("tabindex", "0");
                        } else {
                            tabpanels[i].classList.remove(selectors.active.tabpanel);
                            tabpanels[i].setAttribute("aria-hidden", true);
                            tabs[i].classList.remove(selectors.active.tab);
                            tabs[i].setAttribute("aria-selected", false);
                            tabs[i].setAttribute("tabindex", "-1");
                        }
                    }
                } else {
                    // only one tab
                    tabpanels.classList.add(selectors.active.tabpanel);
                    tabs.classList.add(selectors.active.tab);
                }
            }
        }

        /**
         * Focuses the element and prevents scrolling the element into view
         *
         * @param {HTMLElement} element Element to focus
         */
        function focusWithoutScroll(element) {
            var x = window.scrollX || window.pageXOffset;
            var y = window.scrollY || window.pageYOffset;
            element.focus();
            window.scrollTo(x, y);
        }

        /**
         * Navigates to the tab at the provided index
         *
         * @private
         * @param {Number} index The index of the tab to navigate to
         */
        function navigate(index) {
            that._active = index;
            refreshActive();
        }

        /**
         * Navigates to the item at the provided index and ensures the active tab gains focus
         *
         * @private
         * @param {Number} index The index of the item to navigate to
         */
        function navigateAndFocusTab(index) {
            var exActive = that._active;
            navigate(index);
            focusWithoutScroll(that._elements["tab"][index]);

            if (dataLayerEnabled) {

                var activeItem = getDataLayerId(that._elements.tabpanel[index].dataset.cmpDataLayer);
                var exActiveItem = getDataLayerId(that._elements.tabpanel[exActive].dataset.cmpDataLayer);

                dataLayer.push({
                    event: "cmp:show",
                    eventInfo: {
                        path: "component." + activeItem
                    }
                });

                dataLayer.push({
                    event: "cmp:hide",
                    eventInfo: {
                        path: "component." + exActiveItem
                    }
                });

                var tabsId = that._elements.self.id;
                var uploadPayload = { component: {} };
                uploadPayload.component[tabsId] = { shownItems: [activeItem] };

                var removePayload = { component: {} };
                removePayload.component[tabsId] = { shownItems: undefined };

                dataLayer.push(removePayload);
                dataLayer.push(uploadPayload);
            }
        }
    }

    /**
     * Reads options data from the Tabs wrapper element, defined via {@code data-cmp-*} data attributes
     *
     * @private
     * @param {HTMLElement} element The Tabs element to read options data from
     * @returns {Object} The options read from the component data attributes
     */
    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    /**
     * Parses the dataLayer string and returns the ID
     *
     * @private
     * @param {String} componentDataLayer the dataLayer string
     * @returns {String} dataLayerId or undefined
     */
    function getDataLayerId(componentDataLayer) {
        return Object.keys(JSON.parse(componentDataLayer))[0];
    }

    /**
     * Document ready handler and DOM mutation observers. Initializes Tabs components as necessary.
     *
     * @private
     */
    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Tabs({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Tabs({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

}());

/*******************************************************************************
 * Copyright 2018 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var dataLayerEnabled = document.body.hasAttribute("data-cmp-data-layer-enabled");
    var dataLayer = (dataLayerEnabled)? window.adobeDataLayer = window.adobeDataLayer || [] : undefined;

    var NS = "cmp";
    var IS = "carousel";

    var keyCodes = {
        SPACE: 32,
        END: 35,
        HOME: 36,
        ARROW_LEFT: 37,
        ARROW_UP: 38,
        ARROW_RIGHT: 39,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]'
    };

    var properties = {
        /**
         * Determines whether the Carousel will automatically transition between slides
         *
         * @memberof Carousel
         * @type {Boolean}
         * @default false
         */
        "autoplay": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * Duration (in milliseconds) before automatically transitioning to the next slide
         *
         * @memberof Carousel
         * @type {Number}
         * @default 5000
         */
        "delay": {
            "default": 5000,
            "transform": function(value) {
                value = parseFloat(value);
                return !isNaN(value) ? value : null;
            }
        },
        /**
         * Determines whether automatic pause on hovering the carousel is disabled
         *
         * @memberof Carousel
         * @type {Boolean}
         * @default false
         */
        "autopauseDisabled": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        }
    };

    /**
     * Carousel Configuration
     *
     * @typedef {Object} CarouselConfig Represents a Carousel configuration
     * @property {HTMLElement} element The HTMLElement representing the Carousel
     * @property {Object} options The Carousel options
     */

    /**
     * Carousel
     *
     * @class Carousel
     * @classdesc An interactive Carousel component for navigating a list of generic items
     * @param {CarouselConfig} config The Carousel configuration
     */
    function Carousel(config) {
        var that = this;

        if (config && config.element) {
            init(config);
        }

        /**
         * Initializes the Carousel
         *
         * @private
         * @param {CarouselConfig} config The Carousel configuration
         */
        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            setupProperties(config.options);
            cacheElements(config.element);

            that._active = 0;
            that._paused = false;

            if (that._elements.item) {
                refreshActive();
                bindEvents();
                resetAutoplayInterval();
                refreshPlayPauseActions();
            }

            if (window.Granite && window.Granite.author && window.Granite.author.MessageChannel) {
                /*
                 * Editor message handling:
                 * - subscribe to "cmp.panelcontainer" message requests sent by the editor frame
                 * - check that the message data panel container type is correct and that the id (path) matches this specific Carousel component
                 * - if so, route the "navigate" operation to enact a navigation of the Carousel based on index data
                 */
                new window.Granite.author.MessageChannel("cqauthor", window).subscribeRequestMessage("cmp.panelcontainer", function(message) {
                    if (message.data && message.data.type === "cmp-carousel" && message.data.id === that._elements.self.dataset["cmpPanelcontainerId"]) {
                        if (message.data.operation === "navigate") {
                            navigate(message.data.index);
                        }
                    }
                });
            }
        }

        /**
         * Caches the Carousel elements as defined via the {@code data-carousel-hook="ELEMENT_NAME"} markup API
         *
         * @private
         * @param {HTMLElement} wrapper The Carousel wrapper element
         */
        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                var capitalized = IS;
                capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                var key = hook.dataset[NS + "Hook" + capitalized];
                if (that._elements[key]) {
                    if (!Array.isArray(that._elements[key])) {
                        var tmp = that._elements[key];
                        that._elements[key] = [tmp];
                    }
                    that._elements[key].push(hook);
                } else {
                    that._elements[key] = hook;
                }
            }
        }

        /**
         * Sets up properties for the Carousel based on the passed options.
         *
         * @private
         * @param {Object} options The Carousel options
         */
        function setupProperties(options) {
            that._properties = {};

            for (var key in properties) {
                if (properties.hasOwnProperty(key)) {
                    var property = properties[key];
                    var value = null;

                    if (options && options[key] != null) {
                        value = options[key];

                        // transform the provided option
                        if (property && typeof property.transform === "function") {
                            value = property.transform(value);
                        }
                    }

                    if (value === null) {
                        // value still null, take the property default
                        value = properties[key]["default"];
                    }

                    that._properties[key] = value;
                }
            }
        }

        /**
         * Binds Carousel event handling
         *
         * @private
         */
        function bindEvents() {
            if (that._elements["previous"]) {
                that._elements["previous"].addEventListener("click", function() {
                    var index = getPreviousIndex();
                    navigate(index);
                    if (dataLayerEnabled) {
                        dataLayer.push({
                            event: "cmp:show",
                            eventInfo: {
                                path: "component." + getDataLayerId(that._elements.item[index].dataset.cmpDataLayer)
                            }
                        });
                    }
                });
            }

            if (that._elements["next"]) {
                that._elements["next"].addEventListener("click", function() {
                    var index = getNextIndex();
                    navigate(index);
                    if (dataLayerEnabled) {
                        dataLayer.push({
                            event: "cmp:show",
                            eventInfo: {
                                path: "component." + getDataLayerId(that._elements.item[index].dataset.cmpDataLayer)
                            }
                        });
                    }
                });
            }

            var indicators = that._elements["indicator"];
            if (indicators) {
                for (var i = 0; i < indicators.length; i++) {
                    (function(index) {
                        indicators[i].addEventListener("click", function(event) {
                            navigateAndFocusIndicator(index);
                        });
                    })(i);
                }
            }

            if (that._elements["pause"]) {
                if (that._properties.autoplay) {
                    that._elements["pause"].addEventListener("click", onPauseClick);
                }
            }

            if (that._elements["play"]) {
                if (that._properties.autoplay) {
                    that._elements["play"].addEventListener("click", onPlayClick);
                }
            }

            that._elements.self.addEventListener("keydown", onKeyDown);

            if (!that._properties.autopauseDisabled) {
                that._elements.self.addEventListener("mouseenter", onMouseEnter);
                that._elements.self.addEventListener("mouseleave", onMouseLeave);
            }
        }

        /**
         * Handles carousel keydown events
         *
         * @private
         * @param {Object} event The keydown event
         */
        function onKeyDown(event) {
            var index = that._active;
            var lastIndex = that._elements["indicator"].length - 1;

            switch (event.keyCode) {
                case keyCodes.ARROW_LEFT:
                case keyCodes.ARROW_UP:
                    event.preventDefault();
                    if (index > 0) {
                        navigateAndFocusIndicator(index - 1);
                    }
                    break;
                case keyCodes.ARROW_RIGHT:
                case keyCodes.ARROW_DOWN:
                    event.preventDefault();
                    if (index < lastIndex) {
                        navigateAndFocusIndicator(index + 1);
                    }
                    break;
                case keyCodes.HOME:
                    event.preventDefault();
                    navigateAndFocusIndicator(0);
                    break;
                case keyCodes.END:
                    event.preventDefault();
                    navigateAndFocusIndicator(lastIndex);
                    break;
                case keyCodes.SPACE:
                    if (that._properties.autoplay && (event.target !== that._elements["previous"] && event.target !== that._elements["next"])) {
                        event.preventDefault();
                        if (!that._paused) {
                            pause();
                        } else {
                            play();
                        }
                    }
                    if (event.target === that._elements["pause"]) {
                        that._elements["play"].focus();
                    }
                    if (event.target === that._elements["play"]) {
                        that._elements["pause"].focus();
                    }
                    break;
                default:
                    return;
            }
        }

        /**
         * Handles carousel mouseenter events
         *
         * @private
         * @param {Object} event The mouseenter event
         */
        function onMouseEnter(event) {
            clearAutoplayInterval();
        }

        /**
         * Handles carousel mouseleave events
         *
         * @private
         * @param {Object} event The mouseleave event
         */
        function onMouseLeave(event) {
            resetAutoplayInterval();
        }

        /**
         * Handles pause element click events
         *
         * @private
         * @param {Object} event The click event
         */
        function onPauseClick(event) {
            pause();
            that._elements["play"].focus();
        }

        /**
         * Handles play element click events
         *
         * @private
         * @param {Object} event The click event
         */
        function onPlayClick() {
            play();
            that._elements["pause"].focus();
        }

        /**
         * Pauses the playing of the Carousel. Sets {@code Carousel#_paused} marker.
         * Only relevant when autoplay is enabled
         *
         * @private
         */
        function pause() {
            that._paused = true;
            clearAutoplayInterval();
            refreshPlayPauseActions();
        }

        /**
         * Enables the playing of the Carousel. Sets {@code Carousel#_paused} marker.
         * Only relevant when autoplay is enabled
         *
         * @private
         */
        function play() {
            that._paused = false;

            // If the Carousel is hovered, don't begin auto transitioning until the next mouse leave event
            var hovered = false;
            if (that._elements.self.parentElement) {
                hovered = that._elements.self.parentElement.querySelector(":hover") === that._elements.self;
            }
            if (that._properties.autopauseDisabled || !hovered) {
                resetAutoplayInterval();
            }

            refreshPlayPauseActions();
        }

        /**
         * Refreshes the play/pause action markup based on the {@code Carousel#_paused} state
         *
         * @private
         */
        function refreshPlayPauseActions() {
            setActionDisabled(that._elements["pause"], that._paused);
            setActionDisabled(that._elements["play"], !that._paused);
        }

        /**
         * Refreshes the item markup based on the current {@code Carousel#_active} index
         *
         * @private
         */
        function refreshActive() {
            var items = that._elements["item"];
            var indicators = that._elements["indicator"];

            if (items) {
                if (Array.isArray(items)) {
                    for (var i = 0; i < items.length; i++) {
                        if (i === parseInt(that._active)) {
                            items[i].classList.add("cmp-carousel__item--active");
                            items[i].removeAttribute("aria-hidden");
                            indicators[i].classList.add("cmp-carousel__indicator--active");
                            indicators[i].setAttribute("aria-selected", true);
                            indicators[i].setAttribute("tabindex", "0");
                        } else {
                            items[i].classList.remove("cmp-carousel__item--active");
                            items[i].setAttribute("aria-hidden", true);
                            indicators[i].classList.remove("cmp-carousel__indicator--active");
                            indicators[i].setAttribute("aria-selected", false);
                            indicators[i].setAttribute("tabindex", "-1");
                        }
                    }
                } else {
                    // only one item
                    items.classList.add("cmp-carousel__item--active");
                    indicators.classList.add("cmp-carousel__indicator--active");
                }
            }
        }

        /**
         * Focuses the element and prevents scrolling the element into view
         *
         * @param {HTMLElement} element Element to focus
         */
        function focusWithoutScroll(element) {
            var x = window.scrollX || window.pageXOffset;
            var y = window.scrollY || window.pageYOffset;
            element.focus();
            window.scrollTo(x, y);
        }

        /**
         * Retrieves the next active index, with looping
         *
         * @private
         * @returns {Number} Index of the next carousel item
         */
        function getNextIndex() {
            return that._active === (that._elements["item"].length - 1) ? 0 : that._active + 1;
        }

        /**
         * Retrieves the previous active index, with looping
         *
         * @private
         * @returns {Number} Index of the previous carousel item
         */
        function getPreviousIndex() {
            return that._active === 0 ? (that._elements["item"].length - 1) : that._active - 1;
        }

        /**
         * Navigates to the item at the provided index
         *
         * @private
         * @param {Number} index The index of the item to navigate to
         */
        function navigate(index) {
            if (index < 0 || index > (that._elements["item"].length - 1)) {
                return;
            }

            that._active = index;
            refreshActive();

            if (dataLayerEnabled) {
                var carouselId = that._elements.self.id;
                var activeItem = getDataLayerId(that._elements.item[index].dataset.cmpDataLayer);
                var updatePayload = { component: {} };
                updatePayload.component[carouselId] = { shownItems: [activeItem] };

                var removePayload = { component: {} };
                removePayload.component[carouselId] = { shownItems: undefined };

                dataLayer.push(removePayload);
                dataLayer.push(updatePayload);
            }

            // reset the autoplay transition interval following navigation, if not already hovering the carousel
            if (that._elements.self.parentElement) {
                if (that._elements.self.parentElement.querySelector(":hover") !== that._elements.self) {
                    resetAutoplayInterval();
                }
            }
        }

        /**
         * Navigates to the item at the provided index and ensures the active indicator gains focus
         *
         * @private
         * @param {Number} index The index of the item to navigate to
         */
        function navigateAndFocusIndicator(index) {
            navigate(index);
            focusWithoutScroll(that._elements["indicator"][index]);

            if (dataLayerEnabled) {
                dataLayer.push({
                    event: "cmp:show",
                    eventInfo: {
                        path: "component." + getDataLayerId(that._elements.item[index].dataset.cmpDataLayer)
                    }
                });
            }
        }

        /**
         * Starts/resets automatic slide transition interval
         *
         * @private
         */
        function resetAutoplayInterval() {
            if (that._paused || !that._properties.autoplay) {
                return;
            }
            clearAutoplayInterval();
            that._autoplayIntervalId = window.setInterval(function() {
                if (document.visibilityState && document.hidden) {
                    return;
                }
                var indicators = that._elements["indicators"];
                if (indicators !== document.activeElement && indicators.contains(document.activeElement)) {
                    // if an indicator has focus, ensure we switch focus following navigation
                    navigateAndFocusIndicator(getNextIndex());
                } else {
                    navigate(getNextIndex());
                }
            }, that._properties.delay);
        }

        /**
         * Clears/pauses automatic slide transition interval
         *
         * @private
         */
        function clearAutoplayInterval() {
            window.clearInterval(that._autoplayIntervalId);
            that._autoplayIntervalId = null;
        }

        /**
         * Sets the disabled state for an action and toggles the appropriate CSS classes
         *
         * @private
         * @param {HTMLElement} action Action to disable
         * @param {Boolean} [disable] {@code true} to disable, {@code false} to enable
         */
        function setActionDisabled(action, disable) {
            if (!action) {
                return;
            }
            if (disable !== false) {
                action.disabled = true;
                action.classList.add("cmp-carousel__action--disabled");
            } else {
                action.disabled = false;
                action.classList.remove("cmp-carousel__action--disabled");
            }
        }
    }

    /**
     * Reads options data from the Carousel wrapper element, defined via {@code data-cmp-*} data attributes
     *
     * @private
     * @param {HTMLElement} element The Carousel element to read options data from
     * @returns {Object} The options read from the component data attributes
     */
    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    /**
     * Parses the dataLayer string and returns the ID
     *
     * @private
     * @param {String} componentDataLayer the dataLayer string
     * @returns {String} dataLayerId or undefined
     */
    function getDataLayerId(componentDataLayer) {
        return Object.keys(JSON.parse(componentDataLayer))[0];
    }

    /**
     * Document ready handler and DOM mutation observers. Initializes Carousel components as necessary.
     *
     * @private
     */
    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Carousel({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Carousel({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

}());

/*******************************************************************************
 * Copyright 2017 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
if (window.Element && !Element.prototype.closest) {
    // eslint valid-jsdoc: "off"
    Element.prototype.closest =
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var el      = this;
            var i;
            do {
                i = matches.length;
                while (--i >= 0 && matches.item(i) !== el) {
                    // continue
                }
            } while ((i < 0) && (el = el.parentElement));
            return el;
        };
}

if (window.Element && !Element.prototype.matches) {
    Element.prototype.matches =
        Element.prototype.matchesSelector ||
        Element.prototype.mozMatchesSelector ||
        Element.prototype.msMatchesSelector ||
        Element.prototype.oMatchesSelector ||
        Element.prototype.webkitMatchesSelector ||
        function(s) {
            "use strict";
            var matches = (this.document || this.ownerDocument).querySelectorAll(s);
            var i       = matches.length;
            while (--i >= 0 && matches.item(i) !== this) {
                // continue
            }
            return i > -1;
        };
}

if (!Object.assign) {
    Object.assign = function(target, varArgs) { // .length of function is 2
        "use strict";
        if (target === null) {
            throw new TypeError("Cannot convert undefined or null to object");
        }

        var to = Object(target);

        for (var index = 1; index < arguments.length; index++) {
            var nextSource = arguments[index];

            if (nextSource !== null) {
                for (var nextKey in nextSource) {
                    if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {
                        to[nextKey] = nextSource[nextKey];
                    }
                }
            }
        }
        return to;
    };
}

(function(arr) {
    "use strict";
    arr.forEach(function(item) {
        if (item.hasOwnProperty("remove")) {
            return;
        }
        Object.defineProperty(item, "remove", {
            configurable: true,
            enumerable: true,
            writable: true,
            value: function remove() {
                this.parentNode.removeChild(this);
            }
        });
    });
})([Element.prototype, CharacterData.prototype, DocumentType.prototype]);

/*******************************************************************************
 * Copyright 2016 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "image";

    var EMPTY_PIXEL = "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7";
    var LAZY_THRESHOLD_DEFAULT = 0;
    var SRC_URI_TEMPLATE_WIDTH_VAR = "{.width}";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        image: '[data-cmp-hook-image="image"]',
        map: '[data-cmp-hook-image="map"]',
        area: '[data-cmp-hook-image="area"]'
    };

    var lazyLoader = {
        "cssClass": "cmp-image__image--is-loading",
        "style": {
            "height": 0,
            "padding-bottom": "" // will be replaced with % ratio
        }
    };

    var properties = {
        /**
         * An array of alternative image widths (in pixels).
         * Used to replace a {.width} variable in the src property with an optimal width if a URI template is provided.
         *
         * @memberof Image
         * @type {Number[]}
         * @default []
         */
        "widths": {
            "default": [],
            "transform": function(value) {
                var widths = [];
                value.split(",").forEach(function(item) {
                    item = parseFloat(item);
                    if (!isNaN(item)) {
                        widths.push(item);
                    }
                });
                return widths;
            }
        },
        /**
         * Indicates whether the image should be rendered lazily.
         *
         * @memberof Image
         * @type {Boolean}
         * @default false
         */
        "lazy": {
            "default": false,
            "transform": function(value) {
                return !(value === null || typeof value === "undefined");
            }
        },
        /**
         * The lazy threshold.
         * This is the number of pixels, in advance of becoming visible, when an lazy-loading image should begin
         * to load.
         *
         * @memberof Image
         * @type {Number}
         * @default 0
         */
        "lazythreshold": {
            "default": 0,
            "transform": function(value) {
                const val =  parseInt(value);
                if (isNaN(val)) {
                    return LAZY_THRESHOLD_DEFAULT;
                }
                return val;
            }
        },
        /**
         * The image source.
         *
         * Can be a simple image source, or a URI template representation that
         * can be variable expanded - useful for building an image configuration with an alternative width.
         * e.g. '/path/image.coreimg{.width}.jpeg/1506620954214.jpeg'
         *
         * @memberof Image
         * @type {String}
         */
        "src": {
            "transform": function(value) {
                return decodeURIComponent(value);
            }
        }
    };

    var devicePixelRatio = window.devicePixelRatio || 1;

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function Image(config) {
        var that = this;

        function init(config) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");

            setupProperties(config.options);
            cacheElements(config.element);

            if (!that._elements.noscript) {
                return;
            }

            that._elements.container = that._elements.link ? that._elements.link : that._elements.self;

            unwrapNoScript();

            if (that._properties.lazy) {
                addLazyLoader();
            }

            if (that._elements.map) {
                that._elements.image.addEventListener("load", onLoad);
            }

            window.addEventListener("resize", onWindowResize);
            ["focus", "click", "load", "transitionend", "animationend", "scroll"].forEach(function(name) {
                document.addEventListener(name, that.update);
            });

            that._elements.image.addEventListener("cmp-image-redraw", that.update);
            that.update();
        }

        function loadImage() {
            var hasWidths = that._properties.widths && that._properties.widths.length > 0;
            var replacement = hasWidths ? "." + getOptimalWidth() : "";
            var url = that._properties.src.replace(SRC_URI_TEMPLATE_WIDTH_VAR, replacement);

            if (that._elements.image.getAttribute("src") !== url) {
                that._elements.image.setAttribute("src", url);
                if (!hasWidths) {
                    window.removeEventListener("scroll", that.update);
                }
            }

            if (that._lazyLoaderShowing) {
                that._elements.image.addEventListener("load", removeLazyLoader);
            }
        }

        function getOptimalWidth() {
            var container = that._elements.self;
            var containerWidth = container.clientWidth;
            while (containerWidth === 0 && container.parentNode) {
                container = container.parentNode;
                containerWidth = container.clientWidth;
            }
            var optimalWidth = containerWidth * devicePixelRatio;
            var len = that._properties.widths.length;
            var key = 0;

            while ((key < len - 1) && (that._properties.widths[key] < optimalWidth)) {
                key++;
            }

            return that._properties.widths[key].toString();
        }

        function addLazyLoader() {
            var width = that._elements.image.getAttribute("width");
            var height = that._elements.image.getAttribute("height");

            if (width && height) {
                var ratio = (height / width) * 100;
                var styles = lazyLoader.style;

                styles["padding-bottom"] = ratio + "%";

                for (var s in styles) {
                    if (styles.hasOwnProperty(s)) {
                        that._elements.image.style[s] = styles[s];
                    }
                }
            }
            that._elements.image.setAttribute("src", EMPTY_PIXEL);
            that._elements.image.classList.add(lazyLoader.cssClass);
            that._lazyLoaderShowing = true;
        }

        function unwrapNoScript() {
            var markup = decodeNoscript(that._elements.noscript.textContent.trim());
            var parser = new DOMParser();

            // temporary document avoids requesting the image before removing its src
            var temporaryDocument = parser.parseFromString(markup, "text/html");
            var imageElement = temporaryDocument.querySelector(selectors.image);
            imageElement.removeAttribute("src");
            that._elements.container.insertBefore(imageElement, that._elements.noscript);

            var mapElement = temporaryDocument.querySelector(selectors.map);
            if (mapElement) {
                that._elements.container.insertBefore(mapElement, that._elements.noscript);
            }

            that._elements.noscript.parentNode.removeChild(that._elements.noscript);
            if (that._elements.container.matches(selectors.image)) {
                that._elements.image = that._elements.container;
            } else {
                that._elements.image = that._elements.container.querySelector(selectors.image);
            }

            that._elements.map = that._elements.container.querySelector(selectors.map);
            that._elements.areas = that._elements.container.querySelectorAll(selectors.area);
        }

        function removeLazyLoader() {
            that._elements.image.classList.remove(lazyLoader.cssClass);
            for (var property in lazyLoader.style) {
                if (lazyLoader.style.hasOwnProperty(property)) {
                    that._elements.image.style[property] = "";
                }
            }
            that._elements.image.removeEventListener("load", removeLazyLoader);
            that._lazyLoaderShowing = false;
        }

        function isLazyVisible() {
            if (that._elements.container.offsetParent === null) {
                return false;
            }

            var wt = window.pageYOffset;
            var wb = wt + document.documentElement.clientHeight;
            var et = that._elements.container.getBoundingClientRect().top + wt;
            var eb = et + that._elements.container.clientHeight;

            return eb >= wt - that._properties.lazythreshold && et <= wb + that._properties.lazythreshold;
        }

        function resizeAreas() {
            if (that._elements.areas && that._elements.areas.length > 0) {
                for (var i = 0; i < that._elements.areas.length; i++) {
                    var width = that._elements.image.width;
                    var height = that._elements.image.height;

                    if (width && height) {
                        var relcoords = that._elements.areas[i].dataset.cmpRelcoords;
                        if (relcoords) {
                            var relativeCoordinates = relcoords.split(",");
                            var coordinates = new Array(relativeCoordinates.length);

                            for (var j = 0; j < coordinates.length; j++) {
                                if (j % 2 === 0) {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * width);
                                } else {
                                    coordinates[j] = parseInt(relativeCoordinates[j] * height);
                                }
                            }

                            that._elements.areas[i].coords = coordinates;
                        }
                    }
                }
            }
        }

        function cacheElements(wrapper) {
            that._elements = {};
            that._elements.self = wrapper;
            var hooks = that._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

            for (var i = 0; i < hooks.length; i++) {
                var hook = hooks[i];
                var capitalized = IS;
                capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
                var key = hook.dataset[NS + "Hook" + capitalized];
                that._elements[key] = hook;
            }
        }

        function setupProperties(options) {
            that._properties = {};

            for (var key in properties) {
                if (properties.hasOwnProperty(key)) {
                    var property = properties[key];
                    if (options && options[key] != null) {
                        if (property && typeof property.transform === "function") {
                            that._properties[key] = property.transform(options[key]);
                        } else {
                            that._properties[key] = options[key];
                        }
                    } else {
                        that._properties[key] = properties[key]["default"];
                    }
                }
            }
        }

        function onWindowResize() {
            that.update();
            resizeAreas();
        }

        function onLoad() {
            resizeAreas();
        }

        that.update = function() {
            if (that._properties.lazy) {
                if (isLazyVisible()) {
                    loadImage();
                }
            } else {
                loadImage();
            }
        };

        if (config && config.element) {
            init(config);
        }
    }

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Image({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body             = document.querySelector("body");
        var observer         = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Image({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

    /*
        on drag & drop of the component into a parsys, noscript's content will be escaped multiple times by the editor which creates
        the DOM for editing; the HTML parser cannot be used here due to the multiple escaping
     */
    function decodeNoscript(text) {
        text = text.replace(/&(amp;)*lt;/g, "<");
        text = text.replace(/&(amp;)*gt;/g, ">");
        return text;
    }

})();

/*******************************************************************************
 * Copyright 2017 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "search";

    var DELAY = 300; // time before fetching new results when the user is typing a search string
    var LOADING_DISPLAY_DELAY = 300; // minimum time during which the loading indicator is displayed
    var PARAM_RESULTS_OFFSET = "resultsOffset";

    var keyCodes = {
        TAB: 9,
        ENTER: 13,
        ESCAPE: 27,
        ARROW_UP: 38,
        ARROW_DOWN: 40
    };

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]',
        item: {
            self: "[data-" + NS + "-hook-" + IS + '="item"]',
            title: "[data-" + NS + "-hook-" + IS + '="itemTitle"]',
            focused: "." + NS + "-search__item--is-focused"
        }
    };

    var properties = {
        /**
         * The minimum required length of the search term before results are fetched.
         *
         * @memberof Search
         * @type {Number}
         * @default 3
         */
        minLength: {
            "default": 3,
            transform: function(value) {
                value = parseFloat(value);
                return isNaN(value) ? null : value;
            }
        },
        /**
         * The maximal number of results fetched by a search request.
         *
         * @memberof Search
         * @type {Number}
         * @default 10
         */
        resultsSize: {
            "default": 10,
            transform: function(value) {
                value = parseFloat(value);
                return isNaN(value) ? null : value;
            }
        }
    };

    var idCount = 0;

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function toggleShow(element, show) {
        if (element) {
            if (show !== false) {
                element.style.display = "block";
                element.setAttribute("aria-hidden", false);
            } else {
                element.style.display = "none";
                element.setAttribute("aria-hidden", true);
            }
        }
    }

    function serialize(form) {
        var query = [];
        if (form && form.elements) {
            for (var i = 0; i < form.elements.length; i++) {
                var node = form.elements[i];
                if (!node.disabled && node.name) {
                    var param = [node.name, encodeURIComponent(node.value)];
                    query.push(param.join("="));
                }
            }
        }
        return query.join("&");
    }

    function mark(node, regex) {
        if (!node || !regex) {
            return;
        }

        // text nodes
        if (node.nodeType === 3) {
            var nodeValue = node.nodeValue;
            var match = regex.exec(nodeValue);

            if (nodeValue && match) {
                var element = document.createElement("mark");
                element.className = NS + "-search__item-mark";
                element.appendChild(document.createTextNode(match[0]));

                var after = node.splitText(match.index);
                after.nodeValue = after.nodeValue.substring(match[0].length);
                node.parentNode.insertBefore(element, after);
            }
        } else if (node.hasChildNodes()) {
            for (var i = 0; i < node.childNodes.length; i++) {
                // recurse
                mark(node.childNodes[i], regex);
            }
        }
    }

    function Search(config) {
        if (config.element) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");
        }

        this._cacheElements(config.element);
        this._setupProperties(config.options);

        this._action = this._elements.form.getAttribute("action");
        this._resultsOffset = 0;
        this._hasMoreResults = true;

        this._elements.input.addEventListener("input", this._onInput.bind(this));
        this._elements.input.addEventListener("focus", this._onInput.bind(this));
        this._elements.input.addEventListener("keydown", this._onKeydown.bind(this));
        this._elements.clear.addEventListener("click", this._onClearClick.bind(this));
        document.addEventListener("click", this._onDocumentClick.bind(this));
        this._elements.results.addEventListener("scroll", this._onScroll.bind(this));

        this._makeAccessible();
    }

    Search.prototype._displayResults = function() {
        if (this._elements.input.value.length === 0) {
            toggleShow(this._elements.clear, false);
            this._cancelResults();
        } else if (this._elements.input.value.length < this._properties.minLength) {
            toggleShow(this._elements.clear, true);
        } else {
            this._updateResults();
            toggleShow(this._elements.clear, true);
        }
    };

    Search.prototype._onScroll = function(event) {
        // fetch new results when the results to be scrolled down are less than the visible results
        if (this._elements.results.scrollTop + 2 * this._elements.results.clientHeight >= this._elements.results.scrollHeight) {
            this._resultsOffset += this._properties.resultsSize;
            this._displayResults();
        }
    };

    Search.prototype._onInput = function(event) {
        var self = this;
        self._cancelResults();
        // start searching when the search term reaches the minimum length
        this._timeout = setTimeout(function() {
            self._displayResults();
        }, DELAY);
    };

    Search.prototype._onKeydown = function(event) {
        var self = this;

        switch (event.keyCode) {
            case keyCodes.TAB:
                if (self._resultsOpen()) {
                    event.preventDefault();
                }
                break;
            case keyCodes.ENTER:
                event.preventDefault();
                if (self._resultsOpen()) {
                    var focused = self._elements.results.querySelector(selectors.item.focused);
                    if (focused) {
                        focused.click();
                    }
                }
                break;
            case keyCodes.ESCAPE:
                self._cancelResults();
                break;
            case keyCodes.ARROW_UP:
                if (self._resultsOpen()) {
                    event.preventDefault();
                    self._stepResultFocus(true);
                }
                break;
            case keyCodes.ARROW_DOWN:
                if (self._resultsOpen()) {
                    event.preventDefault();
                    self._stepResultFocus();
                } else {
                    // test the input and if necessary fetch and display the results
                    self._onInput();
                }
                break;
            default:
                return;
        }
    };

    Search.prototype._onClearClick = function(event) {
        event.preventDefault();
        this._elements.input.value = "";
        toggleShow(this._elements.clear, false);
        toggleShow(this._elements.results, false);
    };

    Search.prototype._onDocumentClick = function(event) {
        var inputContainsTarget =  this._elements.input.contains(event.target);
        var resultsContainTarget = this._elements.results.contains(event.target);

        if (!(inputContainsTarget || resultsContainTarget)) {
            toggleShow(this._elements.results, false);
        }
    };

    Search.prototype._resultsOpen = function() {
        return this._elements.results.style.display !== "none";
    };

    Search.prototype._makeAccessible = function() {
        var id = NS + "-search-results-" + idCount;
        this._elements.input.setAttribute("aria-owns", id);
        this._elements.results.id = id;
        idCount++;
    };

    Search.prototype._generateItems = function(data, results) {
        var self = this;

        data.forEach(function(item) {
            var el = document.createElement("span");
            el.innerHTML = self._elements.itemTemplate.innerHTML;
            el.querySelectorAll(selectors.item.title)[0].appendChild(document.createTextNode(item.title));
            el.querySelectorAll(selectors.item.self)[0].setAttribute("href", item.url);
            results.innerHTML += el.innerHTML;
        });
    };

    Search.prototype._markResults = function() {
        var nodeList = this._elements.results.querySelectorAll(selectors.item.self);
        var escapedTerm = this._elements.input.value.replace(/[-[\]{}()*+?.,\\^$|#\s]/g, "\\$&");
        var regex = new RegExp("(" + escapedTerm + ")", "gi");

        for (var i = this._resultsOffset - 1; i < nodeList.length; ++i) {
            var result = nodeList[i];
            mark(result, regex);
        }
    };

    Search.prototype._stepResultFocus = function(reverse) {
        var results = this._elements.results.querySelectorAll(selectors.item.self);
        var focused = this._elements.results.querySelector(selectors.item.focused);
        var newFocused;
        var index = Array.prototype.indexOf.call(results, focused);
        var focusedCssClass = NS + "-search__item--is-focused";

        if (results.length > 0) {

            if (!reverse) {
                // highlight the next result
                if (index < 0) {
                    results[0].classList.add(focusedCssClass);
                } else if (index + 1 < results.length) {
                    results[index].classList.remove(focusedCssClass);
                    results[index + 1].classList.add(focusedCssClass);
                }

                // if the last visible result is partially hidden, scroll up until it's completely visible
                newFocused = this._elements.results.querySelector(selectors.item.focused);
                if (newFocused) {
                    var bottomHiddenHeight = newFocused.offsetTop + newFocused.offsetHeight - this._elements.results.scrollTop - this._elements.results.clientHeight;
                    if (bottomHiddenHeight > 0) {
                        this._elements.results.scrollTop += bottomHiddenHeight;
                    } else {
                        this._onScroll();
                    }
                }

            } else {
                // highlight the previous result
                if (index >= 1) {
                    results[index].classList.remove(focusedCssClass);
                    results[index - 1].classList.add(focusedCssClass);
                }

                // if the first visible result is partially hidden, scroll down until it's completely visible
                newFocused = this._elements.results.querySelector(selectors.item.focused);
                if (newFocused) {
                    var topHiddenHeight = this._elements.results.scrollTop - newFocused.offsetTop;
                    if (topHiddenHeight > 0) {
                        this._elements.results.scrollTop -= topHiddenHeight;
                    }
                }
            }
        }
    };

    Search.prototype._updateResults = function() {
        var self = this;
        if (self._hasMoreResults) {
            var request = new XMLHttpRequest();
            var url = self._action + "?" + serialize(self._elements.form) + "&" + PARAM_RESULTS_OFFSET + "=" + self._resultsOffset;

            request.open("GET", url, true);
            request.onload = function() {
                // when the results are loaded: hide the loading indicator and display the search icon after a minimum period
                setTimeout(function() {
                    toggleShow(self._elements.loadingIndicator, false);
                    toggleShow(self._elements.icon, true);
                }, LOADING_DISPLAY_DELAY);
                if (request.status >= 200 && request.status < 400) {
                    // success status
                    var data = JSON.parse(request.responseText);
                    if (data.length > 0) {
                        self._generateItems(data, self._elements.results);
                        self._markResults();
                        toggleShow(self._elements.results, true);
                    } else {
                        self._hasMoreResults = false;
                    }
                    // the total number of results is not a multiple of the fetched results:
                    // -> we reached the end of the query
                    if (self._elements.results.querySelectorAll(selectors.item.self).length % self._properties.resultsSize > 0) {
                        self._hasMoreResults = false;
                    }
                } else {
                    // error status
                }
            };
            // when the results are loading: display the loading indicator and hide the search icon
            toggleShow(self._elements.loadingIndicator, true);
            toggleShow(self._elements.icon, false);
            request.send();
        }
    };

    Search.prototype._cancelResults = function() {
        clearTimeout(this._timeout);
        this._elements.results.scrollTop = 0;
        this._resultsOffset = 0;
        this._hasMoreResults = true;
        this._elements.results.innerHTML = "";
    };

    Search.prototype._cacheElements = function(wrapper) {
        this._elements = {};
        this._elements.self = wrapper;
        var hooks = this._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS + "]");

        for (var i = 0; i < hooks.length; i++) {
            var hook = hooks[i];
            var capitalized = IS;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var key = hook.dataset[NS + "Hook" + capitalized];
            this._elements[key] = hook;
        }
    };

    Search.prototype._setupProperties = function(options) {
        this._properties = {};

        for (var key in properties) {
            if (properties.hasOwnProperty(key)) {
                var property = properties[key];
                if (options && options[key] != null) {
                    if (property && typeof property.transform === "function") {
                        this._properties[key] = property.transform(options[key]);
                    } else {
                        this._properties[key] = options[key];
                    }
                } else {
                    this._properties[key] = properties[key]["default"];
                }
            }
        }
    };

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new Search({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new Search({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

})();

/*******************************************************************************
 * Copyright 2016 Adobe
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 ******************************************************************************/
(function() {
    "use strict";

    var NS = "cmp";
    var IS = "formText";
    var IS_DASH = "form-text";

    var selectors = {
        self: "[data-" + NS + '-is="' + IS + '"]'
    };

    var properties = {
        /**
         * A validation message to display if there is a type mismatch between the user input and expected input.
         *
         * @type {String}
         */
        constraintMessage: {
        },
        /**
         * A validation message to display if no input is supplied, but input is expected for the field.
         *
         * @type {String}
         */
        requiredMessage: {
        }
    };

    function readData(element) {
        var data = element.dataset;
        var options = [];
        var capitalized = IS;
        capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
        var reserved = ["is", "hook" + capitalized];

        for (var key in data) {
            if (data.hasOwnProperty(key)) {
                var value = data[key];

                if (key.indexOf(NS) === 0) {
                    key = key.slice(NS.length);
                    key = key.charAt(0).toLowerCase() + key.substring(1);

                    if (reserved.indexOf(key) === -1) {
                        options[key] = value;
                    }
                }
            }
        }

        return options;
    }

    function FormText(config) {
        if (config.element) {
            // prevents multiple initialization
            config.element.removeAttribute("data-" + NS + "-is");
        }

        this._cacheElements(config.element);
        this._setupProperties(config.options);

        this._elements.input.addEventListener("invalid", this._onInvalid.bind(this));
        this._elements.input.addEventListener("input", this._onInput.bind(this));
    }

    FormText.prototype._onInvalid = function(event) {
        event.target.setCustomValidity("");
        if (event.target.validity.typeMismatch) {
            if (this._properties.constraintMessage) {
                event.target.setCustomValidity(this._properties.constraintMessage);
            }
        } else if (event.target.validity.valueMissing) {
            if (this._properties.requiredMessage) {
                event.target.setCustomValidity(this._properties.requiredMessage);
            }
        }
    };

    FormText.prototype._onInput = function(event) {
        event.target.setCustomValidity("");
    };

    FormText.prototype._cacheElements = function(wrapper) {
        this._elements = {};
        this._elements.self = wrapper;
        var hooks = this._elements.self.querySelectorAll("[data-" + NS + "-hook-" + IS_DASH + "]");
        for (var i = 0; i < hooks.length; i++) {
            var hook = hooks[i];
            var capitalized = IS;
            capitalized = capitalized.charAt(0).toUpperCase() + capitalized.slice(1);
            var key = hook.dataset[NS + "Hook" + capitalized];
            this._elements[key] = hook;
        }
    };

    FormText.prototype._setupProperties = function(options) {
        this._properties = {};

        for (var key in properties) {
            if (properties.hasOwnProperty(key)) {
                var property = properties[key];
                if (options && options[key] != null) {
                    if (property && typeof property.transform === "function") {
                        this._properties[key] = property.transform(options[key]);
                    } else {
                        this._properties[key] = options[key];
                    }
                } else {
                    this._properties[key] = properties[key]["default"];
                }
            }
        }
    };

    function onDocumentReady() {
        var elements = document.querySelectorAll(selectors.self);
        for (var i = 0; i < elements.length; i++) {
            new FormText({ element: elements[i], options: readData(elements[i]) });
        }

        var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
        var body = document.querySelector("body");
        var observer = new MutationObserver(function(mutations) {
            mutations.forEach(function(mutation) {
                // needed for IE
                var nodesArray = [].slice.call(mutation.addedNodes);
                if (nodesArray.length > 0) {
                    nodesArray.forEach(function(addedNode) {
                        if (addedNode.querySelectorAll) {
                            var elementsArray = [].slice.call(addedNode.querySelectorAll(selectors.self));
                            elementsArray.forEach(function(element) {
                                new FormText({ element: element, options: readData(element) });
                            });
                        }
                    });
                }
            });
        });

        observer.observe(body, {
            subtree: true,
            childList: true,
            characterData: true
        });
    }

    if (document.readyState !== "loading") {
        onDocumentReady();
    } else {
        document.addEventListener("DOMContentLoaded", onDocumentReady);
    }

})();

/******/ (function(modules) { // webpackBootstrap
/******/ 	// install a JSONP callback for chunk loading
/******/ 	function webpackJsonpCallback(data) {
/******/ 		var chunkIds = data[0];
/******/ 		var moreModules = data[1];
/******/ 		var executeModules = data[2];
/******/
/******/ 		// add "moreModules" to the modules object,
/******/ 		// then flag all "chunkIds" as loaded and fire callback
/******/ 		var moduleId, chunkId, i = 0, resolves = [];
/******/ 		for(;i < chunkIds.length; i++) {
/******/ 			chunkId = chunkIds[i];
/******/ 			if(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {
/******/ 				resolves.push(installedChunks[chunkId][0]);
/******/ 			}
/******/ 			installedChunks[chunkId] = 0;
/******/ 		}
/******/ 		for(moduleId in moreModules) {
/******/ 			if(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {
/******/ 				modules[moduleId] = moreModules[moduleId];
/******/ 			}
/******/ 		}
/******/ 		if(parentJsonpFunction) parentJsonpFunction(data);
/******/
/******/ 		while(resolves.length) {
/******/ 			resolves.shift()();
/******/ 		}
/******/
/******/ 		// add entry modules from loaded chunk to deferred list
/******/ 		deferredModules.push.apply(deferredModules, executeModules || []);
/******/
/******/ 		// run deferred modules when all chunks ready
/******/ 		return checkDeferredModules();
/******/ 	};
/******/ 	function checkDeferredModules() {
/******/ 		var result;
/******/ 		for(var i = 0; i < deferredModules.length; i++) {
/******/ 			var deferredModule = deferredModules[i];
/******/ 			var fulfilled = true;
/******/ 			for(var j = 1; j < deferredModule.length; j++) {
/******/ 				var depId = deferredModule[j];
/******/ 				if(installedChunks[depId] !== 0) fulfilled = false;
/******/ 			}
/******/ 			if(fulfilled) {
/******/ 				deferredModules.splice(i--, 1);
/******/ 				result = __webpack_require__(__webpack_require__.s = deferredModule[0]);
/******/ 			}
/******/ 		}
/******/
/******/ 		return result;
/******/ 	}
/******/
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// object to store loaded and loading chunks
/******/ 	// undefined = chunk not loaded, null = chunk preloaded/prefetched
/******/ 	// Promise = chunk loading, 0 = chunk loaded
/******/ 	var installedChunks = {
/******/ 		"site": 0
/******/ 	};
/******/
/******/ 	var deferredModules = [];
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/ 	var jsonpArray = window["webpackJsonp"] = window["webpackJsonp"] || [];
/******/ 	var oldJsonpFunction = jsonpArray.push.bind(jsonpArray);
/******/ 	jsonpArray.push = webpackJsonpCallback;
/******/ 	jsonpArray = jsonpArray.slice();
/******/ 	for(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);
/******/ 	var parentJsonpFunction = oldJsonpFunction;
/******/
/******/
/******/ 	// add entry module to deferred list
/******/ 	deferredModules.push(["./src/main/webpack/site/main.js","vendors~site"]);
/******/ 	// run deferred modules when ready
/******/ 	return checkDeferredModules();
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/main/webpack/components/form/sign-in-buttons/sign-in-buttons.js":
/*!*****************************************************************************!*\
  !*** ./src/main/webpack/components/form/sign-in-buttons/sign-in-buttons.js ***!
  \*****************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\njQuery(function($) {\n    \"use strict\";\n\n    (function() {\n        const currentUserUrl = $('.wknd-sign-in-buttons').data('current-user-url'),\n            signIn = $('[href=\"#sign-in\"]'),\n            signOut = $('[href=\"#sign-out\"]'),\n            greetingLabel = $('#wkndGreetingLabel'),\n            greetingText = greetingLabel.text(),\n            body = $('body');\n\n        $.getJSON(currentUserUrl + \"?nocache=\" + new Date().getTime(), function(currentUser) {\n            const isAnonymous = 'anonymous' === currentUser.authorizableId;\n\n            if(isAnonymous) {\n                signIn.show();\n                body.addClass('anonymous');\n            } else {\n                signOut.show();\n                greetingLabel.text(greetingText + \", \" + currentUser.name);\n                greetingLabel.show();\n            }\n        });\n    })();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL2NvbXBvbmVudHMvZm9ybS9zaWduLWluLWJ1dHRvbnMvc2lnbi1pbi1idXR0b25zLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21haW4vd2VicGFjay9jb21wb25lbnRzL2Zvcm0vc2lnbi1pbi1idXR0b25zL3NpZ24taW4tYnV0dG9ucy5qcz9jMWIzIl0sInNvdXJjZXNDb250ZW50IjpbInZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG5qUXVlcnkoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgKGZ1bmN0aW9uKCkge1xuICAgICAgICBjb25zdCBjdXJyZW50VXNlclVybCA9ICQoJy53a25kLXNpZ24taW4tYnV0dG9ucycpLmRhdGEoJ2N1cnJlbnQtdXNlci11cmwnKSxcbiAgICAgICAgICAgIHNpZ25JbiA9ICQoJ1tocmVmPVwiI3NpZ24taW5cIl0nKSxcbiAgICAgICAgICAgIHNpZ25PdXQgPSAkKCdbaHJlZj1cIiNzaWduLW91dFwiXScpLFxuICAgICAgICAgICAgZ3JlZXRpbmdMYWJlbCA9ICQoJyN3a25kR3JlZXRpbmdMYWJlbCcpLFxuICAgICAgICAgICAgZ3JlZXRpbmdUZXh0ID0gZ3JlZXRpbmdMYWJlbC50ZXh0KCksXG4gICAgICAgICAgICBib2R5ID0gJCgnYm9keScpO1xuXG4gICAgICAgICQuZ2V0SlNPTihjdXJyZW50VXNlclVybCArIFwiP25vY2FjaGU9XCIgKyBuZXcgRGF0ZSgpLmdldFRpbWUoKSwgZnVuY3Rpb24oY3VycmVudFVzZXIpIHtcbiAgICAgICAgICAgIGNvbnN0IGlzQW5vbnltb3VzID0gJ2Fub255bW91cycgPT09IGN1cnJlbnRVc2VyLmF1dGhvcml6YWJsZUlkO1xuXG4gICAgICAgICAgICBpZihpc0Fub255bW91cykge1xuICAgICAgICAgICAgICAgIHNpZ25Jbi5zaG93KCk7XG4gICAgICAgICAgICAgICAgYm9keS5hZGRDbGFzcygnYW5vbnltb3VzJyk7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHNpZ25PdXQuc2hvdygpO1xuICAgICAgICAgICAgICAgIGdyZWV0aW5nTGFiZWwudGV4dChncmVldGluZ1RleHQgKyBcIiwgXCIgKyBjdXJyZW50VXNlci5uYW1lKTtcbiAgICAgICAgICAgICAgICBncmVldGluZ0xhYmVsLnNob3coKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgfSkoKTtcbn0pO1xuIl0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main/webpack/components/form/sign-in-buttons/sign-in-buttons.js\n");

/***/ }),

/***/ "./src/main/webpack/components/form/sign-in-form/sign-in-form.js":
/*!***********************************************************************!*\
  !*** ./src/main/webpack/components/form/sign-in-form/sign-in-form.js ***!
  \***********************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\njQuery(function($) {\n    \"use strict\";\n\n    /* Sign In form submission */\n    $('body').on('submit', '#wknd-sign-in-form', function(e) {\n        e.preventDefault();\n\n        const form = $(this);\n\n        // Clear any form submission errors\n        form.find('[name=j_username][name=j_password]').removeClass('cmp-form-text__text--error');\n\n        $.ajax({\n            type: \"POST\",\n            url: form.attr('action'),\n            data: form.serialize(),\n            success: function(data) {\n                signIn(form.find('input[name=\"sling.auth.redirect\"]') || false);\n            }, error: function(data) {\n                form.find('[name=j_username],[name=j_password]').addClass('cmp-form-text__text--error');\n            }\n        });\n\n        return false;\n    });\n\n    function signIn(redirectField) {\n        if (redirectField) {\n            //always reload current page if sign-in\n            if($(redirectField).attr('id') === 'sling-auth-redirect-signin') {\n                window.location.reload();\n            } else {\n                window.location = $(redirectField).val() ? $(redirectField).val() : '/';\n            }\n            \n        } else {\n            window.location.reload();\n        }\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL2NvbXBvbmVudHMvZm9ybS9zaWduLWluLWZvcm0vc2lnbi1pbi1mb3JtLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21haW4vd2VicGFjay9jb21wb25lbnRzL2Zvcm0vc2lnbi1pbi1mb3JtL3NpZ24taW4tZm9ybS5qcz82ZWQ1Il0sInNvdXJjZXNDb250ZW50IjpbInZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuXG5qUXVlcnkoZnVuY3Rpb24oJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgLyogU2lnbiBJbiBmb3JtIHN1Ym1pc3Npb24gKi9cbiAgICAkKCdib2R5Jykub24oJ3N1Ym1pdCcsICcjd2tuZC1zaWduLWluLWZvcm0nLCBmdW5jdGlvbihlKSB7XG4gICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICBjb25zdCBmb3JtID0gJCh0aGlzKTtcblxuICAgICAgICAvLyBDbGVhciBhbnkgZm9ybSBzdWJtaXNzaW9uIGVycm9yc1xuICAgICAgICBmb3JtLmZpbmQoJ1tuYW1lPWpfdXNlcm5hbWVdW25hbWU9al9wYXNzd29yZF0nKS5yZW1vdmVDbGFzcygnY21wLWZvcm0tdGV4dF9fdGV4dC0tZXJyb3InKTtcblxuICAgICAgICAkLmFqYXgoe1xuICAgICAgICAgICAgdHlwZTogXCJQT1NUXCIsXG4gICAgICAgICAgICB1cmw6IGZvcm0uYXR0cignYWN0aW9uJyksXG4gICAgICAgICAgICBkYXRhOiBmb3JtLnNlcmlhbGl6ZSgpLFxuICAgICAgICAgICAgc3VjY2VzczogZnVuY3Rpb24oZGF0YSkge1xuICAgICAgICAgICAgICAgIHNpZ25Jbihmb3JtLmZpbmQoJ2lucHV0W25hbWU9XCJzbGluZy5hdXRoLnJlZGlyZWN0XCJdJykgfHwgZmFsc2UpO1xuICAgICAgICAgICAgfSwgZXJyb3I6IGZ1bmN0aW9uKGRhdGEpIHtcbiAgICAgICAgICAgICAgICBmb3JtLmZpbmQoJ1tuYW1lPWpfdXNlcm5hbWVdLFtuYW1lPWpfcGFzc3dvcmRdJykuYWRkQ2xhc3MoJ2NtcC1mb3JtLXRleHRfX3RleHQtLWVycm9yJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9KTtcblxuICAgIGZ1bmN0aW9uIHNpZ25JbihyZWRpcmVjdEZpZWxkKSB7XG4gICAgICAgIGlmIChyZWRpcmVjdEZpZWxkKSB7XG4gICAgICAgICAgICAvL2Fsd2F5cyByZWxvYWQgY3VycmVudCBwYWdlIGlmIHNpZ24taW5cbiAgICAgICAgICAgIGlmKCQocmVkaXJlY3RGaWVsZCkuYXR0cignaWQnKSA9PT0gJ3NsaW5nLWF1dGgtcmVkaXJlY3Qtc2lnbmluJykge1xuICAgICAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uID0gJChyZWRpcmVjdEZpZWxkKS52YWwoKSA/ICQocmVkaXJlY3RGaWVsZCkudmFsKCkgOiAnLyc7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHdpbmRvdy5sb2NhdGlvbi5yZWxvYWQoKTtcbiAgICAgICAgfVxuICAgIH1cbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main/webpack/components/form/sign-in-form/sign-in-form.js\n");

/***/ }),

/***/ "./src/main/webpack/components/languagenavigation/languagenavigation.js":
/*!******************************************************************************!*\
  !*** ./src/main/webpack/components/languagenavigation/languagenavigation.js ***!
  \******************************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n *  Copyright 2018 Adobe Systems Incorporated\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\n// Wrap bindings in anonymous namespace to prevent collisions\njQuery(function ($) {\n    \"use strict\";\n\n    function displayCurrentLanguage() {\n        var CMP_SELECTOR = '.cmp-languagenavigation--header',\n            CMP_PROCESSED = 'data-lang-nav-processed',\n            ACTIVE_LINK_SELECTOR = '.cmp-languagenavigation__item--active > .cmp-languagenavigation__item-link',\n            ACTIVE_COUNTRY_SELECTOR = '.cmp-languagenavigation__item--level-0.cmp-languagenavigation__item--active',\n            langNav = $(CMP_SELECTOR).not('[' + CMP_PROCESSED + '=\\'true\\']'),\n            activeCountryImg,\n            activeLanguage,\n            toggleButton,\n            displayPosition;\n\n        //Top Level Navigation (expected to only be one of these)\n        if (langNav != undefined && langNav.length == 1) {\n\n            //insert current lnaguage in header\n            $(langNav).attr(CMP_PROCESSED, true);\n            activeLanguage = $(CMP_SELECTOR + ' ' + ACTIVE_LINK_SELECTOR).attr('lang');\n            activeLanguage = activeLanguage !== undefined ? activeLanguage : 'Language';\n\n            activeCountryImg = $(CMP_SELECTOR + ' ' + ACTIVE_COUNTRY_SELECTOR)\n                               .css('background-image');\n            activeCountryImg = activeCountryImg !== undefined ? activeCountryImg.replace(\"\\\"\", \"\\'\").replace(\"\\\"\", \"\\'\") : 'none';\n\n            toggleButton = '<div class=\"cmp-languagenavigation--langnavtoggle\">' +\n                                '<a id=\"langNavToggleHeader\" style=\"background-image:' + activeCountryImg + \n                                '\" href=\"#langNavToggle\" aria-label=\"Toggle Language\">' + activeLanguage + '</a></div>';\n            $(langNav).prepend(toggleButton);\n\n            //attach toggle to change languages\n            $('#langNavToggleHeader').click(function () {\n                displayPosition = $(this).position().left - 240;\n                $(CMP_SELECTOR + ' .cmp-languagenavigation').css({ left: displayPosition });\n                $(CMP_SELECTOR + ' .cmp-languagenavigation').toggleClass('showMenu');\n                $('#langNavToggleHeader').toggleClass('open');\n            });\n\n            //allow users to click anywhere to close language switcher\n            window.onclick = function (event) {\n                if (!event.target.matches('#langNavToggleHeader') && $('#langNavToggleHeader').hasClass('open')) {\n                    $(CMP_SELECTOR + ' .cmp-languagenavigation').removeClass('showMenu');\n                    $('#langNavToggleHeader').removeClass('open');\n                }\n            }\n\n        }\n    }\n\n    displayCurrentLanguage();\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL2NvbXBvbmVudHMvbGFuZ3VhZ2VuYXZpZ2F0aW9uL2xhbmd1YWdlbmF2aWdhdGlvbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluL3dlYnBhY2svY29tcG9uZW50cy9sYW5ndWFnZW5hdmlnYXRpb24vbGFuZ3VhZ2VuYXZpZ2F0aW9uLmpzPzNlYmYiXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgMjAxOCBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZFxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuLy8gV3JhcCBiaW5kaW5ncyBpbiBhbm9ueW1vdXMgbmFtZXNwYWNlIHRvIHByZXZlbnQgY29sbGlzaW9uc1xualF1ZXJ5KGZ1bmN0aW9uICgkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBmdW5jdGlvbiBkaXNwbGF5Q3VycmVudExhbmd1YWdlKCkge1xuICAgICAgICB2YXIgQ01QX1NFTEVDVE9SID0gJy5jbXAtbGFuZ3VhZ2VuYXZpZ2F0aW9uLS1oZWFkZXInLFxuICAgICAgICAgICAgQ01QX1BST0NFU1NFRCA9ICdkYXRhLWxhbmctbmF2LXByb2Nlc3NlZCcsXG4gICAgICAgICAgICBBQ1RJVkVfTElOS19TRUxFQ1RPUiA9ICcuY21wLWxhbmd1YWdlbmF2aWdhdGlvbl9faXRlbS0tYWN0aXZlID4gLmNtcC1sYW5ndWFnZW5hdmlnYXRpb25fX2l0ZW0tbGluaycsXG4gICAgICAgICAgICBBQ1RJVkVfQ09VTlRSWV9TRUxFQ1RPUiA9ICcuY21wLWxhbmd1YWdlbmF2aWdhdGlvbl9faXRlbS0tbGV2ZWwtMC5jbXAtbGFuZ3VhZ2VuYXZpZ2F0aW9uX19pdGVtLS1hY3RpdmUnLFxuICAgICAgICAgICAgbGFuZ05hdiA9ICQoQ01QX1NFTEVDVE9SKS5ub3QoJ1snICsgQ01QX1BST0NFU1NFRCArICc9XFwndHJ1ZVxcJ10nKSxcbiAgICAgICAgICAgIGFjdGl2ZUNvdW50cnlJbWcsXG4gICAgICAgICAgICBhY3RpdmVMYW5ndWFnZSxcbiAgICAgICAgICAgIHRvZ2dsZUJ1dHRvbixcbiAgICAgICAgICAgIGRpc3BsYXlQb3NpdGlvbjtcblxuICAgICAgICAvL1RvcCBMZXZlbCBOYXZpZ2F0aW9uIChleHBlY3RlZCB0byBvbmx5IGJlIG9uZSBvZiB0aGVzZSlcbiAgICAgICAgaWYgKGxhbmdOYXYgIT0gdW5kZWZpbmVkICYmIGxhbmdOYXYubGVuZ3RoID09IDEpIHtcblxuICAgICAgICAgICAgLy9pbnNlcnQgY3VycmVudCBsbmFndWFnZSBpbiBoZWFkZXJcbiAgICAgICAgICAgICQobGFuZ05hdikuYXR0cihDTVBfUFJPQ0VTU0VELCB0cnVlKTtcbiAgICAgICAgICAgIGFjdGl2ZUxhbmd1YWdlID0gJChDTVBfU0VMRUNUT1IgKyAnICcgKyBBQ1RJVkVfTElOS19TRUxFQ1RPUikuYXR0cignbGFuZycpO1xuICAgICAgICAgICAgYWN0aXZlTGFuZ3VhZ2UgPSBhY3RpdmVMYW5ndWFnZSAhPT0gdW5kZWZpbmVkID8gYWN0aXZlTGFuZ3VhZ2UgOiAnTGFuZ3VhZ2UnO1xuXG4gICAgICAgICAgICBhY3RpdmVDb3VudHJ5SW1nID0gJChDTVBfU0VMRUNUT1IgKyAnICcgKyBBQ1RJVkVfQ09VTlRSWV9TRUxFQ1RPUilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuY3NzKCdiYWNrZ3JvdW5kLWltYWdlJyk7XG4gICAgICAgICAgICBhY3RpdmVDb3VudHJ5SW1nID0gYWN0aXZlQ291bnRyeUltZyAhPT0gdW5kZWZpbmVkID8gYWN0aXZlQ291bnRyeUltZy5yZXBsYWNlKFwiXFxcIlwiLCBcIlxcJ1wiKS5yZXBsYWNlKFwiXFxcIlwiLCBcIlxcJ1wiKSA6ICdub25lJztcblxuICAgICAgICAgICAgdG9nZ2xlQnV0dG9uID0gJzxkaXYgY2xhc3M9XCJjbXAtbGFuZ3VhZ2VuYXZpZ2F0aW9uLS1sYW5nbmF2dG9nZ2xlXCI+JyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICc8YSBpZD1cImxhbmdOYXZUb2dnbGVIZWFkZXJcIiBzdHlsZT1cImJhY2tncm91bmQtaW1hZ2U6JyArIGFjdGl2ZUNvdW50cnlJbWcgKyBcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJ1wiIGhyZWY9XCIjbGFuZ05hdlRvZ2dsZVwiIGFyaWEtbGFiZWw9XCJUb2dnbGUgTGFuZ3VhZ2VcIj4nICsgYWN0aXZlTGFuZ3VhZ2UgKyAnPC9hPjwvZGl2Pic7XG4gICAgICAgICAgICAkKGxhbmdOYXYpLnByZXBlbmQodG9nZ2xlQnV0dG9uKTtcblxuICAgICAgICAgICAgLy9hdHRhY2ggdG9nZ2xlIHRvIGNoYW5nZSBsYW5ndWFnZXNcbiAgICAgICAgICAgICQoJyNsYW5nTmF2VG9nZ2xlSGVhZGVyJykuY2xpY2soZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgIGRpc3BsYXlQb3NpdGlvbiA9ICQodGhpcykucG9zaXRpb24oKS5sZWZ0IC0gMjQwO1xuICAgICAgICAgICAgICAgICQoQ01QX1NFTEVDVE9SICsgJyAuY21wLWxhbmd1YWdlbmF2aWdhdGlvbicpLmNzcyh7IGxlZnQ6IGRpc3BsYXlQb3NpdGlvbiB9KTtcbiAgICAgICAgICAgICAgICAkKENNUF9TRUxFQ1RPUiArICcgLmNtcC1sYW5ndWFnZW5hdmlnYXRpb24nKS50b2dnbGVDbGFzcygnc2hvd01lbnUnKTtcbiAgICAgICAgICAgICAgICAkKCcjbGFuZ05hdlRvZ2dsZUhlYWRlcicpLnRvZ2dsZUNsYXNzKCdvcGVuJyk7XG4gICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgLy9hbGxvdyB1c2VycyB0byBjbGljayBhbnl3aGVyZSB0byBjbG9zZSBsYW5ndWFnZSBzd2l0Y2hlclxuICAgICAgICAgICAgd2luZG93Lm9uY2xpY2sgPSBmdW5jdGlvbiAoZXZlbnQpIHtcbiAgICAgICAgICAgICAgICBpZiAoIWV2ZW50LnRhcmdldC5tYXRjaGVzKCcjbGFuZ05hdlRvZ2dsZUhlYWRlcicpICYmICQoJyNsYW5nTmF2VG9nZ2xlSGVhZGVyJykuaGFzQ2xhc3MoJ29wZW4nKSkge1xuICAgICAgICAgICAgICAgICAgICAkKENNUF9TRUxFQ1RPUiArICcgLmNtcC1sYW5ndWFnZW5hdmlnYXRpb24nKS5yZW1vdmVDbGFzcygnc2hvd01lbnUnKTtcbiAgICAgICAgICAgICAgICAgICAgJCgnI2xhbmdOYXZUb2dnbGVIZWFkZXInKS5yZW1vdmVDbGFzcygnb3BlbicpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cblxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGlzcGxheUN1cnJlbnRMYW5ndWFnZSgpO1xufSk7XG4iXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main/webpack/components/languagenavigation/languagenavigation.js\n");

/***/ }),

/***/ "./src/main/webpack/components/layout-container/modal.js":
/*!***************************************************************!*\
  !*** ./src/main/webpack/components/layout-container/modal.js ***!
  \***************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("var jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\njQuery(function($) {\n    \"use strict\";\n\n    let visible = false;\n\n    /**\n     * Handle clicking of the Sign In button\n     */\n    $('body').on('click', '[data-modal-url]', showModal);\n\n\n    /**\n     * Handle clicking \"off-modal\" to hide it\n     */\n    $(document).click(hideModal);\n\n\n    function showModal(e) {\n        e.preventDefault();\n\n        const xfUrl = $(this).data('modal-url');\n\n        if (visible || !xfUrl) { return; }\n\n        $.get(xfUrl, function (data) {\n            const modal = $('<div id=\"wknd-modal\"/>');\n            $('body').append(modal.append(data));\n            modal.fadeIn(300, function() { visible = true; });\n            visible = true;\n        });\n\n        return false;\n    }\n\n    function hideModal(e) {\n        const modal = $('#wknd-modal');\n\n        // if the target of the click isn't the modal nor a descendant of the modal\n        if (visible && modal && !modal.is(e.target) && modal.has(e.target).length === 0) {\n            e.preventDefault();\n\n            modal.fadeOut(200, function(){\n                modal.remove();\n                visible = false;\n            });\n\n            return false;\n        }\n\n    }\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL2NvbXBvbmVudHMvbGF5b3V0LWNvbnRhaW5lci9tb2RhbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluL3dlYnBhY2svY29tcG9uZW50cy9sYXlvdXQtY29udGFpbmVyL21vZGFsLmpzPzY4YjUiXSwic291cmNlc0NvbnRlbnQiOlsidmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbmpRdWVyeShmdW5jdGlvbigkKSB7XG4gICAgXCJ1c2Ugc3RyaWN0XCI7XG5cbiAgICBsZXQgdmlzaWJsZSA9IGZhbHNlO1xuXG4gICAgLyoqXG4gICAgICogSGFuZGxlIGNsaWNraW5nIG9mIHRoZSBTaWduIEluIGJ1dHRvblxuICAgICAqL1xuICAgICQoJ2JvZHknKS5vbignY2xpY2snLCAnW2RhdGEtbW9kYWwtdXJsXScsIHNob3dNb2RhbCk7XG5cblxuICAgIC8qKlxuICAgICAqIEhhbmRsZSBjbGlja2luZyBcIm9mZi1tb2RhbFwiIHRvIGhpZGUgaXRcbiAgICAgKi9cbiAgICAkKGRvY3VtZW50KS5jbGljayhoaWRlTW9kYWwpO1xuXG5cbiAgICBmdW5jdGlvbiBzaG93TW9kYWwoZSkge1xuICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgY29uc3QgeGZVcmwgPSAkKHRoaXMpLmRhdGEoJ21vZGFsLXVybCcpO1xuXG4gICAgICAgIGlmICh2aXNpYmxlIHx8ICF4ZlVybCkgeyByZXR1cm47IH1cblxuICAgICAgICAkLmdldCh4ZlVybCwgZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gJCgnPGRpdiBpZD1cIndrbmQtbW9kYWxcIi8+Jyk7XG4gICAgICAgICAgICAkKCdib2R5JykuYXBwZW5kKG1vZGFsLmFwcGVuZChkYXRhKSk7XG4gICAgICAgICAgICBtb2RhbC5mYWRlSW4oMzAwLCBmdW5jdGlvbigpIHsgdmlzaWJsZSA9IHRydWU7IH0pO1xuICAgICAgICAgICAgdmlzaWJsZSA9IHRydWU7XG4gICAgICAgIH0pO1xuXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBoaWRlTW9kYWwoZSkge1xuICAgICAgICBjb25zdCBtb2RhbCA9ICQoJyN3a25kLW1vZGFsJyk7XG5cbiAgICAgICAgLy8gaWYgdGhlIHRhcmdldCBvZiB0aGUgY2xpY2sgaXNuJ3QgdGhlIG1vZGFsIG5vciBhIGRlc2NlbmRhbnQgb2YgdGhlIG1vZGFsXG4gICAgICAgIGlmICh2aXNpYmxlICYmIG1vZGFsICYmICFtb2RhbC5pcyhlLnRhcmdldCkgJiYgbW9kYWwuaGFzKGUudGFyZ2V0KS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgbW9kYWwuZmFkZU91dCgyMDAsIGZ1bmN0aW9uKCl7XG4gICAgICAgICAgICAgICAgbW9kYWwucmVtb3ZlKCk7XG4gICAgICAgICAgICAgICAgdmlzaWJsZSA9IGZhbHNlO1xuICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuXG4gICAgfVxufSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main/webpack/components/layout-container/modal.js\n");

/***/ }),

/***/ "./src/main/webpack/components/navigation/navigation.js":
/*!**************************************************************!*\
  !*** ./src/main/webpack/components/navigation/navigation.js ***!
  \**************************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n *  Copyright 2018 Adobe Systems Incorporated\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\n// Wrap bindings in anonymous namespace to prevent collisions\njQuery(function ($) {\n    \"use strict\";\n\n    var HEADER_CONTAINER_SELECTOR          = '.cmp-experiencefragment--header',\n        FOOTER_CONTAINER_SELECTOR          = '.cmp-experiencefragment--footer',\n        HEADER_NAVIGATION_SELECTOR         = '.cmp-navigation--header .cmp-navigation',\n        ROOT_LEVEL_NAVIGATION_SELECTOR     = '.cmp-navigation__item--level-0.cmp-navigation__item--active > .cmp-navigation__item-link',\n        LOGO_SELECTOR                      = '.cmp-image--logo .cmp-image__link',\n        DATA_PROCESSED                     = 'data-processed';\n\n    function createMobileNavigation() {\n\n        var $nav = $(HEADER_CONTAINER_SELECTOR + ' ' + HEADER_NAVIGATION_SELECTOR),\n            $body = $('body');\n\n        //Top Level Navigation (expected to only be one of these)\n        if ($nav !== undefined && $nav.length === 1 && !$($nav)[0].hasAttribute(DATA_PROCESSED)) {\n            // Mark the component element as processed to avoid the cyclic processing (see .not(..) above).\n            $($nav).attr(DATA_PROCESSED, true)\n\n            // Toggle Nav\n            $('<div id=\"toggleNav\">' +\n                '<a href=\"#mobileNav\" aria-label=\"Open hidden mobile navigation\" class=\"toggle\"><i class=\"wknd__icon wkndicon-menu\" aria-hidden=\"true\"></i></a>' +\n                '</div>'\n            ).appendTo($body);\n\n            // Navigation Panel.\n            $(\n                    '<div id=\"mobileNav\" class=\"cmp-navigation--mobile\">' +\n                    '<nav class=\"cmp-navigation\">' +\n                    $($nav).html() +\n                    '</nav>' +\n                    '</div>'\n                )\n                .appendTo($body)\n                .panel({ //panel defined in uti.js\n                    delay: 500,\n                    hideOnClick: true,\n                    hideOnSwipe: true,\n                    resetScroll: true,\n                    resetForms: true,\n                    side: 'left',\n                    target: $body,\n                    visibleClass: 'navPanel-visible'\n                });\n        }\n    }\n\n    /**\n     * Update the logo with a \"home\" url based on the root link from the navigation\n     */\n    function setHomeLink(navigationSelector, logoSelector) {\n        var $nav = $(navigationSelector),\n            $logo = $(logoSelector);\n        \n            //Expect to update only a single logo\n            if($nav !== undefined && \n                $nav.length === 1 && \n                $logo !== undefined && \n                $logo.length === 1 && \n                !$($logo)[0].hasAttribute(DATA_PROCESSED)) {\n                    //set the logo href attribute based on the root navigation target\n                    $($logo).attr('href', $($nav).attr('href'));\n                }\n    }\n\n    createMobileNavigation();\n    setHomeLink(HEADER_NAVIGATION_SELECTOR + ' ' + ROOT_LEVEL_NAVIGATION_SELECTOR, HEADER_CONTAINER_SELECTOR + ' ' + LOGO_SELECTOR );\n    setHomeLink(FOOTER_CONTAINER_SELECTOR + ' ' + ROOT_LEVEL_NAVIGATION_SELECTOR, FOOTER_CONTAINER_SELECTOR + ' ' + LOGO_SELECTOR );\n\n});//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL2NvbXBvbmVudHMvbmF2aWdhdGlvbi9uYXZpZ2F0aW9uLmpzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21haW4vd2VicGFjay9jb21wb25lbnRzL25hdmlnYXRpb24vbmF2aWdhdGlvbi5qcz8yYjE3Il0sInNvdXJjZXNDb250ZW50IjpbIi8qXG4gKiAgQ29weXJpZ2h0IDIwMTggQWRvYmUgU3lzdGVtcyBJbmNvcnBvcmF0ZWRcbiAqXG4gKiAgTGljZW5zZWQgdW5kZXIgdGhlIEFwYWNoZSBMaWNlbnNlLCBWZXJzaW9uIDIuMCAodGhlIFwiTGljZW5zZVwiKTtcbiAqICB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXG4gKiAgWW91IG1heSBvYnRhaW4gYSBjb3B5IG9mIHRoZSBMaWNlbnNlIGF0XG4gKlxuICogICAgICBodHRwOi8vd3d3LmFwYWNoZS5vcmcvbGljZW5zZXMvTElDRU5TRS0yLjBcbiAqXG4gKiAgVW5sZXNzIHJlcXVpcmVkIGJ5IGFwcGxpY2FibGUgbGF3IG9yIGFncmVlZCB0byBpbiB3cml0aW5nLCBzb2Z0d2FyZVxuICogIGRpc3RyaWJ1dGVkIHVuZGVyIHRoZSBMaWNlbnNlIGlzIGRpc3RyaWJ1dGVkIG9uIGFuIFwiQVMgSVNcIiBCQVNJUyxcbiAqICBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cbiAqICBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnMgYW5kXG4gKiAgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cblxudmFyIGpRdWVyeSA9IHJlcXVpcmUoXCJqcXVlcnlcIik7XG5cbi8vIFdyYXAgYmluZGluZ3MgaW4gYW5vbnltb3VzIG5hbWVzcGFjZSB0byBwcmV2ZW50IGNvbGxpc2lvbnNcbmpRdWVyeShmdW5jdGlvbiAoJCkge1xuICAgIFwidXNlIHN0cmljdFwiO1xuXG4gICAgdmFyIEhFQURFUl9DT05UQUlORVJfU0VMRUNUT1IgICAgICAgICAgPSAnLmNtcC1leHBlcmllbmNlZnJhZ21lbnQtLWhlYWRlcicsXG4gICAgICAgIEZPT1RFUl9DT05UQUlORVJfU0VMRUNUT1IgICAgICAgICAgPSAnLmNtcC1leHBlcmllbmNlZnJhZ21lbnQtLWZvb3RlcicsXG4gICAgICAgIEhFQURFUl9OQVZJR0FUSU9OX1NFTEVDVE9SICAgICAgICAgPSAnLmNtcC1uYXZpZ2F0aW9uLS1oZWFkZXIgLmNtcC1uYXZpZ2F0aW9uJyxcbiAgICAgICAgUk9PVF9MRVZFTF9OQVZJR0FUSU9OX1NFTEVDVE9SICAgICA9ICcuY21wLW5hdmlnYXRpb25fX2l0ZW0tLWxldmVsLTAuY21wLW5hdmlnYXRpb25fX2l0ZW0tLWFjdGl2ZSA+IC5jbXAtbmF2aWdhdGlvbl9faXRlbS1saW5rJyxcbiAgICAgICAgTE9HT19TRUxFQ1RPUiAgICAgICAgICAgICAgICAgICAgICA9ICcuY21wLWltYWdlLS1sb2dvIC5jbXAtaW1hZ2VfX2xpbmsnLFxuICAgICAgICBEQVRBX1BST0NFU1NFRCAgICAgICAgICAgICAgICAgICAgID0gJ2RhdGEtcHJvY2Vzc2VkJztcblxuICAgIGZ1bmN0aW9uIGNyZWF0ZU1vYmlsZU5hdmlnYXRpb24oKSB7XG5cbiAgICAgICAgdmFyICRuYXYgPSAkKEhFQURFUl9DT05UQUlORVJfU0VMRUNUT1IgKyAnICcgKyBIRUFERVJfTkFWSUdBVElPTl9TRUxFQ1RPUiksXG4gICAgICAgICAgICAkYm9keSA9ICQoJ2JvZHknKTtcblxuICAgICAgICAvL1RvcCBMZXZlbCBOYXZpZ2F0aW9uIChleHBlY3RlZCB0byBvbmx5IGJlIG9uZSBvZiB0aGVzZSlcbiAgICAgICAgaWYgKCRuYXYgIT09IHVuZGVmaW5lZCAmJiAkbmF2Lmxlbmd0aCA9PT0gMSAmJiAhJCgkbmF2KVswXS5oYXNBdHRyaWJ1dGUoREFUQV9QUk9DRVNTRUQpKSB7XG4gICAgICAgICAgICAvLyBNYXJrIHRoZSBjb21wb25lbnQgZWxlbWVudCBhcyBwcm9jZXNzZWQgdG8gYXZvaWQgdGhlIGN5Y2xpYyBwcm9jZXNzaW5nIChzZWUgLm5vdCguLikgYWJvdmUpLlxuICAgICAgICAgICAgJCgkbmF2KS5hdHRyKERBVEFfUFJPQ0VTU0VELCB0cnVlKVxuXG4gICAgICAgICAgICAvLyBUb2dnbGUgTmF2XG4gICAgICAgICAgICAkKCc8ZGl2IGlkPVwidG9nZ2xlTmF2XCI+JyArXG4gICAgICAgICAgICAgICAgJzxhIGhyZWY9XCIjbW9iaWxlTmF2XCIgYXJpYS1sYWJlbD1cIk9wZW4gaGlkZGVuIG1vYmlsZSBuYXZpZ2F0aW9uXCIgY2xhc3M9XCJ0b2dnbGVcIj48aSBjbGFzcz1cIndrbmRfX2ljb24gd2tuZGljb24tbWVudVwiIGFyaWEtaGlkZGVuPVwidHJ1ZVwiPjwvaT48L2E+JyArXG4gICAgICAgICAgICAgICAgJzwvZGl2PidcbiAgICAgICAgICAgICkuYXBwZW5kVG8oJGJvZHkpO1xuXG4gICAgICAgICAgICAvLyBOYXZpZ2F0aW9uIFBhbmVsLlxuICAgICAgICAgICAgJChcbiAgICAgICAgICAgICAgICAgICAgJzxkaXYgaWQ9XCJtb2JpbGVOYXZcIiBjbGFzcz1cImNtcC1uYXZpZ2F0aW9uLS1tb2JpbGVcIj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxuYXYgY2xhc3M9XCJjbXAtbmF2aWdhdGlvblwiPicgK1xuICAgICAgICAgICAgICAgICAgICAkKCRuYXYpLmh0bWwoKSArXG4gICAgICAgICAgICAgICAgICAgICc8L25hdj4nICtcbiAgICAgICAgICAgICAgICAgICAgJzwvZGl2PidcbiAgICAgICAgICAgICAgICApXG4gICAgICAgICAgICAgICAgLmFwcGVuZFRvKCRib2R5KVxuICAgICAgICAgICAgICAgIC5wYW5lbCh7IC8vcGFuZWwgZGVmaW5lZCBpbiB1dGkuanNcbiAgICAgICAgICAgICAgICAgICAgZGVsYXk6IDUwMCxcbiAgICAgICAgICAgICAgICAgICAgaGlkZU9uQ2xpY2s6IHRydWUsXG4gICAgICAgICAgICAgICAgICAgIGhpZGVPblN3aXBlOiB0cnVlLFxuICAgICAgICAgICAgICAgICAgICByZXNldFNjcm9sbDogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgcmVzZXRGb3JtczogdHJ1ZSxcbiAgICAgICAgICAgICAgICAgICAgc2lkZTogJ2xlZnQnLFxuICAgICAgICAgICAgICAgICAgICB0YXJnZXQ6ICRib2R5LFxuICAgICAgICAgICAgICAgICAgICB2aXNpYmxlQ2xhc3M6ICduYXZQYW5lbC12aXNpYmxlJ1xuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogVXBkYXRlIHRoZSBsb2dvIHdpdGggYSBcImhvbWVcIiB1cmwgYmFzZWQgb24gdGhlIHJvb3QgbGluayBmcm9tIHRoZSBuYXZpZ2F0aW9uXG4gICAgICovXG4gICAgZnVuY3Rpb24gc2V0SG9tZUxpbmsobmF2aWdhdGlvblNlbGVjdG9yLCBsb2dvU2VsZWN0b3IpIHtcbiAgICAgICAgdmFyICRuYXYgPSAkKG5hdmlnYXRpb25TZWxlY3RvciksXG4gICAgICAgICAgICAkbG9nbyA9ICQobG9nb1NlbGVjdG9yKTtcbiAgICAgICAgXG4gICAgICAgICAgICAvL0V4cGVjdCB0byB1cGRhdGUgb25seSBhIHNpbmdsZSBsb2dvXG4gICAgICAgICAgICBpZigkbmF2ICE9PSB1bmRlZmluZWQgJiYgXG4gICAgICAgICAgICAgICAgJG5hdi5sZW5ndGggPT09IDEgJiYgXG4gICAgICAgICAgICAgICAgJGxvZ28gIT09IHVuZGVmaW5lZCAmJiBcbiAgICAgICAgICAgICAgICAkbG9nby5sZW5ndGggPT09IDEgJiYgXG4gICAgICAgICAgICAgICAgISQoJGxvZ28pWzBdLmhhc0F0dHJpYnV0ZShEQVRBX1BST0NFU1NFRCkpIHtcbiAgICAgICAgICAgICAgICAgICAgLy9zZXQgdGhlIGxvZ28gaHJlZiBhdHRyaWJ1dGUgYmFzZWQgb24gdGhlIHJvb3QgbmF2aWdhdGlvbiB0YXJnZXRcbiAgICAgICAgICAgICAgICAgICAgJCgkbG9nbykuYXR0cignaHJlZicsICQoJG5hdikuYXR0cignaHJlZicpKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgfVxuXG4gICAgY3JlYXRlTW9iaWxlTmF2aWdhdGlvbigpO1xuICAgIHNldEhvbWVMaW5rKEhFQURFUl9OQVZJR0FUSU9OX1NFTEVDVE9SICsgJyAnICsgUk9PVF9MRVZFTF9OQVZJR0FUSU9OX1NFTEVDVE9SLCBIRUFERVJfQ09OVEFJTkVSX1NFTEVDVE9SICsgJyAnICsgTE9HT19TRUxFQ1RPUiApO1xuICAgIHNldEhvbWVMaW5rKEZPT1RFUl9DT05UQUlORVJfU0VMRUNUT1IgKyAnICcgKyBST09UX0xFVkVMX05BVklHQVRJT05fU0VMRUNUT1IsIEZPT1RFUl9DT05UQUlORVJfU0VMRUNUT1IgKyAnICcgKyBMT0dPX1NFTEVDVE9SICk7XG5cbn0pOyJdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main/webpack/components/navigation/navigation.js\n");

/***/ }),

/***/ "./src/main/webpack/site/main.js":
/*!***************************************!*\
  !*** ./src/main/webpack/site/main.js ***!
  \***************************************/
/*! no exports provided */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _main_scss__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./main.scss */ \"./src/main/webpack/site/main.scss\");\n/* harmony import */ var _main_scss__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_main_scss__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./util.js */ \"./src/main/webpack/site/util.js\");\n/* harmony import */ var _util_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_util_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _scroll_indicator__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./scroll-indicator */ \"./src/main/webpack/site/scroll-indicator.js\");\n/* harmony import */ var _scroll_indicator__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_scroll_indicator__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _components_languagenavigation_languagenavigation_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../components/languagenavigation/languagenavigation.js */ \"./src/main/webpack/components/languagenavigation/languagenavigation.js\");\n/* harmony import */ var _components_languagenavigation_languagenavigation_js__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_components_languagenavigation_languagenavigation_js__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _components_layout_container_modal_js__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../components/layout-container/modal.js */ \"./src/main/webpack/components/layout-container/modal.js\");\n/* harmony import */ var _components_layout_container_modal_js__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_components_layout_container_modal_js__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _components_navigation_navigation_js__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../components/navigation/navigation.js */ \"./src/main/webpack/components/navigation/navigation.js\");\n/* harmony import */ var _components_navigation_navigation_js__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_components_navigation_navigation_js__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var _components_form_sign_in_buttons_sign_in_buttons_js__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ../components/form/sign-in-buttons/sign-in-buttons.js */ \"./src/main/webpack/components/form/sign-in-buttons/sign-in-buttons.js\");\n/* harmony import */ var _components_form_sign_in_buttons_sign_in_buttons_js__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(_components_form_sign_in_buttons_sign_in_buttons_js__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var _components_form_sign_in_form_sign_in_form_js__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ../components/form/sign-in-form/sign-in-form.js */ \"./src/main/webpack/components/form/sign-in-form/sign-in-form.js\");\n/* harmony import */ var _components_form_sign_in_form_sign_in_form_js__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(_components_form_sign_in_form_sign_in_form_js__WEBPACK_IMPORTED_MODULE_7__);\n// Stylesheets\n\n\n// Typescript/Javascript\n\n\n\n\n\n\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL3NpdGUvbWFpbi5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluL3dlYnBhY2svc2l0ZS9tYWluLmpzPzZmY2EiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gU3R5bGVzaGVldHNcbmltcG9ydCAnLi9tYWluLnNjc3MnO1xuXG4vLyBUeXBlc2NyaXB0L0phdmFzY3JpcHRcbmltcG9ydCAnLi91dGlsLmpzJztcbmltcG9ydCAnLi9zY3JvbGwtaW5kaWNhdG9yJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy9sYW5ndWFnZW5hdmlnYXRpb24vbGFuZ3VhZ2VuYXZpZ2F0aW9uLmpzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy9sYXlvdXQtY29udGFpbmVyL21vZGFsLmpzJztcbmltcG9ydCAnLi4vY29tcG9uZW50cy9uYXZpZ2F0aW9uL25hdmlnYXRpb24uanMnO1xuaW1wb3J0ICcuLi9jb21wb25lbnRzL2Zvcm0vc2lnbi1pbi1idXR0b25zL3NpZ24taW4tYnV0dG9ucy5qcyc7XG5pbXBvcnQgJy4uL2NvbXBvbmVudHMvZm9ybS9zaWduLWluLWZvcm0vc2lnbi1pbi1mb3JtLmpzJztcbiJdLCJtYXBwaW5ncyI6IkFBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Iiwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./src/main/webpack/site/main.js\n");

/***/ }),

/***/ "./src/main/webpack/site/main.scss":
/*!*****************************************!*\
  !*** ./src/main/webpack/site/main.scss ***!
  \*****************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("// extracted by mini-css-extract-plugin//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL3NpdGUvbWFpbi5zY3NzLmpzIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vLy4vc3JjL21haW4vd2VicGFjay9zaXRlL21haW4uc2Nzcz80ODZlIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIGV4dHJhY3RlZCBieSBtaW5pLWNzcy1leHRyYWN0LXBsdWdpbiJdLCJtYXBwaW5ncyI6IkFBQUEiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main/webpack/site/main.scss\n");

/***/ }),

/***/ "./src/main/webpack/site/scroll-indicator.js":
/*!***************************************************!*\
  !*** ./src/main/webpack/site/scroll-indicator.js ***!
  \***************************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n *  Copyright 2018 Adobe Systems Incorporated\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n\nvar jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n\n(function (element, $) {\n    'use strict';\n    var target = $(element),\n        className = \"scrolly\",\n        scroll;\n\n    if ($(window).scrollTop() > 15) {\n        target.addClass(className);\n    }\n\n    document.addEventListener('scroll', (evt) => {\n        scroll = $(window).scrollTop();\n        if (scroll > 15) {\n            target.addClass(className);\n        } else {\n            target.removeClass(className);\n        }\n    }, {\n        capture: false,\n        passive: true\n    });\n\n}('body', jQuery));//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL3NpdGUvc2Nyb2xsLWluZGljYXRvci5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluL3dlYnBhY2svc2l0ZS9zY3JvbGwtaW5kaWNhdG9yLmpzP2U4ZjciXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgMjAxOCBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZFxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuXG52YXIgalF1ZXJ5ID0gcmVxdWlyZShcImpxdWVyeVwiKTtcblxuKGZ1bmN0aW9uIChlbGVtZW50LCAkKSB7XG4gICAgJ3VzZSBzdHJpY3QnO1xuICAgIHZhciB0YXJnZXQgPSAkKGVsZW1lbnQpLFxuICAgICAgICBjbGFzc05hbWUgPSBcInNjcm9sbHlcIixcbiAgICAgICAgc2Nyb2xsO1xuXG4gICAgaWYgKCQod2luZG93KS5zY3JvbGxUb3AoKSA+IDE1KSB7XG4gICAgICAgIHRhcmdldC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgIH1cblxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3Njcm9sbCcsIChldnQpID0+IHtcbiAgICAgICAgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xuICAgICAgICBpZiAoc2Nyb2xsID4gMTUpIHtcbiAgICAgICAgICAgIHRhcmdldC5hZGRDbGFzcyhjbGFzc05hbWUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGFyZ2V0LnJlbW92ZUNsYXNzKGNsYXNzTmFtZSk7XG4gICAgICAgIH1cbiAgICB9LCB7XG4gICAgICAgIGNhcHR1cmU6IGZhbHNlLFxuICAgICAgICBwYXNzaXZlOiB0cnVlXG4gICAgfSk7XG5cbn0oJ2JvZHknLCBqUXVlcnkpKTsiXSwibWFwcGluZ3MiOiJBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./src/main/webpack/site/scroll-indicator.js\n");

/***/ }),

/***/ "./src/main/webpack/site/util.js":
/*!***************************************!*\
  !*** ./src/main/webpack/site/util.js ***!
  \***************************************/
/*! no static exports found */
/***/ (function(module, exports, __webpack_require__) {

eval("/*\n *  Copyright 2018 Adobe Systems Incorporated\n *\n *  Licensed under the Apache License, Version 2.0 (the \"License\");\n *  you may not use this file except in compliance with the License.\n *  You may obtain a copy of the License at\n *\n *      http://www.apache.org/licenses/LICENSE-2.0\n *\n *  Unless required by applicable law or agreed to in writing, software\n *  distributed under the License is distributed on an \"AS IS\" BASIS,\n *  WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n *  See the License for the specific language governing permissions and\n *  limitations under the License.\n */\n/* modified from html5up.net thanks @ajlkn */\n\nvar jQuery = __webpack_require__(/*! jquery */ \"./node_modules/jquery/dist/jquery.js\");\n(function($) {\n\n    /* adding special handlers for passive events https://github.com/WICG/EventListenerOptions */\n\n    jQuery.event.special.touchstart = {\n\t\tsetup: function( _, ns, handle ){\n\t\t\tif ( ns.includes(\"noPreventDefault\") ) {\n\t\t\t  this.addEventListener(\"touchstart\", handle, { passive: true });\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n    };\n\n    jQuery.event.special.touchmove = {\n\t\tsetup: function( _, ns, handle ){\n\t\t\tif ( ns.includes(\"noPreventDefault\") ) {\n\t\t\t  this.addEventListener(\"touchmove\", handle, { passive: true });\n\t\t\t} else {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n    };\n    \n    /**\n     * Generate an indented list of links from a nav. Meant for use with panel().\n     * @return {jQuery} jQuery object.\n     */\n    $.fn.navList = function() {\n\n        var $this = $(this);\n            $a = $this.find('a'),\n            b = [];\n\n        $a.each(function() {\n\n            var $this = $(this),\n                indent = Math.max(0, $this.parents('li').length - 1),\n                href = $this.attr('href'),\n                target = $this.attr('target');\n\n            b.push(\n                '<a ' +\n                    'class=\"link depth-' + indent + '\"' +\n                    ( (typeof target !== 'undefined' && target != '') ? ' target=\"' + target + '\"' : '') +\n                    ( (typeof href !== 'undefined' && href != '') ? ' href=\"' + href + '\"' : '') +\n                '>' +\n                    '<span class=\"indent-' + indent + '\"></span>' +\n                    $this.text() +\n                '</a>'\n            );\n\n        });\n\n        return b.join('');\n\n    };\n\n    /**\n     * Panel-ify an element.\n     * @param {object} userConfig User config.\n     * @return {jQuery} jQuery object.\n     */\n    $.fn.panel = function(userConfig) {\n\n        // No elements?\n            if (this.length == 0)\n                return $this;\n\n        // Multiple elements?\n            if (this.length > 1) {\n\n                for (var i=0; i < this.length; i++)\n                    $(this[i]).panel(userConfig);\n\n                return $this;\n\n            }\n\n        // Vars.\n            var $this = $(this),\n                $body = $('body'),\n                $window = $(window),\n                id = $this.attr('id'),\n                config;\n\n        // Config.\n            config = $.extend({\n\n                // Delay.\n                    delay: 0,\n\n                // Hide panel on link click.\n                    hideOnClick: false,\n\n                // Hide panel on escape keypress.\n                    hideOnEscape: false,\n\n                // Hide panel on swipe.\n                    hideOnSwipe: false,\n\n                // Reset scroll position on hide.\n                    resetScroll: false,\n\n                // Reset forms on hide.\n                    resetForms: false,\n\n                // Side of viewport the panel will appear.\n                    side: null,\n\n                // Target element for \"class\".\n                    target: $this,\n\n                // Class to toggle.\n                    visibleClass: 'visible'\n\n            }, userConfig);\n\n            // Expand \"target\" if it's not a jQuery object already.\n                if (typeof config.target != 'jQuery')\n                    config.target = $(config.target);\n\n        // Panel.\n\n            // Methods.\n                $this._hide = function(event) {\n\n                    // Already hidden? Bail.\n                        if (!config.target.hasClass(config.visibleClass))\n                            return;\n\n                    // If an event was provided, cancel it.\n                        if (event) {\n\n                            event.preventDefault();\n                            event.stopPropagation();\n\n                        }\n\n                    // Hide.\n                        config.target.removeClass(config.visibleClass);\n\n                    // Post-hide stuff.\n                        window.setTimeout(function() {\n\n                            // Reset scroll position.\n                                if (config.resetScroll)\n                                    $this.scrollTop(0);\n\n                            // Reset forms.\n                                if (config.resetForms)\n                                    $this.find('form').each(function() {\n                                        this.reset();\n                                    });\n\n                        }, config.delay);\n\n                };\n\n            // Vendor fixes.\n                $this\n                    .css('-ms-overflow-style', '-ms-autohiding-scrollbar')\n                    .css('-webkit-overflow-scrolling', 'touch');\n\n            // Hide on click.\n                if (config.hideOnClick) {\n\n                    $this.find('a')\n                        .css('-webkit-tap-highlight-color', 'rgba(0,0,0,0)');\n\n                    $this\n                        .on('click', 'a', function(event) {\n\n                            var $a = $(this),\n                                href = $a.attr('href'),\n                                target = $a.attr('target');\n\n                            if (!href || href == '#' || href == '' || href == '#' + id)\n                                return;\n\n                            // Cancel original event.\n                                event.preventDefault();\n                                event.stopPropagation();\n\n                            // Hide panel.\n                                $this._hide();\n\n                            // Redirect to href.\n                                window.setTimeout(function() {\n\n                                    if (target == '_blank')\n                                        window.open(href);\n                                    else\n                                        window.location.href = href;\n\n                                }, config.delay + 10);\n\n                        });\n\n                }\n\n                \n            // Event: Touch stuff.\n                $this.on('touchstart.noPreventDefault', function(event) {\n                    \n                    $this.touchPosX = event.originalEvent.touches[0].pageX;\n                    $this.touchPosY = event.originalEvent.touches[0].pageY;\n\n                })\n                \n                $this.on('touchmove.noPreventDefault', function(event) {\n\n                    if ($this.touchPosX === null\n                    ||  $this.touchPosY === null)\n                        return;\n\n                    var diffX = $this.touchPosX - event.originalEvent.touches[0].pageX,\n                        diffY = $this.touchPosY - event.originalEvent.touches[0].pageY,\n                        th = $this.outerHeight(),\n                        ts = ($this.get(0).scrollHeight - $this.scrollTop());\n\n                    // Hide on swipe?\n                        if (config.hideOnSwipe) {\n\n                            var result = false,\n                                boundary = 20,\n                                delta = 50;\n\n                            switch (config.side) {\n\n                                case 'left':\n                                    result = (diffY < boundary && diffY > (-1 * boundary)) && (diffX > delta);\n                                    break;\n\n                                case 'right':\n                                    result = (diffY < boundary && diffY > (-1 * boundary)) && (diffX < (-1 * delta));\n                                    break;\n\n                                case 'top':\n                                    result = (diffX < boundary && diffX > (-1 * boundary)) && (diffY > delta);\n                                    break;\n\n                                case 'bottom':\n                                    result = (diffX < boundary && diffX > (-1 * boundary)) && (diffY < (-1 * delta));\n                                    break;\n\n                                default:\n                                    break;\n\n                            }\n\n                            if (result) {\n\n                                $this.touchPosX = null;\n                                $this.touchPosY = null;\n                                $this._hide();\n\n                                return false;\n\n                            }\n\n                        }\n\n                    // Prevent vertical scrolling past the top or bottom.\n                        if (($this.scrollTop() < 0 && diffY < 0)\n                        || (ts > (th - 2) && ts < (th + 2) && diffY > 0)) {\n\n                            event.preventDefault();\n                            event.stopPropagation();\n\n                        }\n\n                });\n                \n            // Event: Prevent certain events inside the panel from bubbling.\n                $this.on('click touchend touchstart touchmove', function(event) {\n                    event.stopPropagation();\n                });\n\n            // Event: Hide panel if a child anchor tag pointing to its ID is clicked.\n                $this.on('click', 'a[href=\"#' + id + '\"]', function(event) {\n\n                    event.preventDefault();\n                    event.stopPropagation();\n\n                    config.target.removeClass(config.visibleClass);\n\n                });\n\n        // Body.\n\n            // Event: Hide panel on body click/tap.\n                $body.on('click touchend', function(event) {\n                    $this._hide(event);\n                });\n\n            // Event: Toggle.\n                $body.on('click', 'a[href=\"#' + id + '\"]', function(event) {\n\n                    event.preventDefault();\n                    event.stopPropagation();\n\n                    config.target.toggleClass(config.visibleClass);\n\n                });\n\n        // Window.\n\n            // Event: Hide on ESC.\n                if (config.hideOnEscape)\n                    $window.on('keydown', function(event) {\n\n                        if (event.keyCode == 27)\n                            $this._hide(event);\n\n                    });\n\n        return $this;\n\n    };\n\n    /**\n     * Apply \"placeholder\" attribute polyfill to one or more forms.\n     * @return {jQuery} jQuery object.\n     */\n    $.fn.placeholder = function() {\n\n        // Browser natively supports placeholders? Bail.\n            if (typeof (document.createElement('input')).placeholder != 'undefined')\n                return $(this);\n\n        // No elements?\n            if (this.length == 0)\n                return $this;\n\n        // Multiple elements?\n            if (this.length > 1) {\n\n                for (var i=0; i < this.length; i++)\n                    $(this[i]).placeholder();\n\n                return $this;\n\n            }\n\n        // Vars.\n            var $this = $(this);\n\n        // Text, TextArea.\n            $this.find('input[type=text],textarea')\n                .each(function() {\n\n                    var i = $(this);\n\n                    if (i.val() == ''\n                    ||  i.val() == i.attr('placeholder'))\n                        i\n                            .addClass('polyfill-placeholder')\n                            .val(i.attr('placeholder'));\n\n                })\n                .on('blur', function() {\n\n                    var i = $(this);\n\n                    if (i.attr('name').match(/-polyfill-field$/))\n                        return;\n\n                    if (i.val() == '')\n                        i\n                            .addClass('polyfill-placeholder')\n                            .val(i.attr('placeholder'));\n\n                })\n                .on('focus', function() {\n\n                    var i = $(this);\n\n                    if (i.attr('name').match(/-polyfill-field$/))\n                        return;\n\n                    if (i.val() == i.attr('placeholder'))\n                        i\n                            .removeClass('polyfill-placeholder')\n                            .val('');\n\n                });\n\n        // Password.\n            $this.find('input[type=password]')\n                .each(function() {\n\n                    var i = $(this);\n                    var x = $(\n                                $('<div>')\n                                    .append(i.clone())\n                                    .remove()\n                                    .html()\n                                    .replace(/type=\"password\"/i, 'type=\"text\"')\n                                    .replace(/type=password/i, 'type=text')\n                    );\n\n                    if (i.attr('id') != '')\n                        x.attr('id', i.attr('id') + '-polyfill-field');\n\n                    if (i.attr('name') != '')\n                        x.attr('name', i.attr('name') + '-polyfill-field');\n\n                    x.addClass('polyfill-placeholder')\n                        .val(x.attr('placeholder')).insertAfter(i);\n\n                    if (i.val() == '')\n                        i.hide();\n                    else\n                        x.hide();\n\n                    i\n                        .on('blur', function(event) {\n\n                            event.preventDefault();\n\n                            var x = i.parent().find('input[name=' + i.attr('name') + '-polyfill-field]');\n\n                            if (i.val() == '') {\n\n                                i.hide();\n                                x.show();\n\n                            }\n\n                        });\n\n                    x\n                        .on('focus', function(event) {\n\n                            event.preventDefault();\n\n                            var i = x.parent().find('input[name=' + x.attr('name').replace('-polyfill-field', '') + ']');\n\n                            x.hide();\n\n                            i\n                                .show()\n                                .focus();\n\n                        })\n                        .on('keypress', function(event) {\n\n                            event.preventDefault();\n                            x.val('');\n\n                        });\n\n                });\n\n        // Events.\n            $this\n                .on('submit', function() {\n\n                    $this.find('input[type=text],input[type=password],textarea')\n                        .each(function(event) {\n\n                            var i = $(this);\n\n                            if (i.attr('name').match(/-polyfill-field$/))\n                                i.attr('name', '');\n\n                            if (i.val() == i.attr('placeholder')) {\n\n                                i.removeClass('polyfill-placeholder');\n                                i.val('');\n\n                            }\n\n                        });\n\n                })\n                .on('reset', function(event) {\n\n                    event.preventDefault();\n\n                    $this.find('select')\n                        .val($('option:first').val());\n\n                    $this.find('input,textarea')\n                        .each(function() {\n\n                            var i = $(this),\n                                x;\n\n                            i.removeClass('polyfill-placeholder');\n\n                            switch (this.type) {\n\n                                case 'submit':\n                                case 'reset':\n                                    break;\n\n                                case 'password':\n                                    i.val(i.attr('defaultValue'));\n\n                                    x = i.parent().find('input[name=' + i.attr('name') + '-polyfill-field]');\n\n                                    if (i.val() == '') {\n                                        i.hide();\n                                        x.show();\n                                    }\n                                    else {\n                                        i.show();\n                                        x.hide();\n                                    }\n\n                                    break;\n\n                                case 'checkbox':\n                                case 'radio':\n                                    i.attr('checked', i.attr('defaultValue'));\n                                    break;\n\n                                case 'text':\n                                case 'textarea':\n                                    i.val(i.attr('defaultValue'));\n\n                                    if (i.val() == '') {\n                                        i.addClass('polyfill-placeholder');\n                                        i.val(i.attr('placeholder'));\n                                    }\n\n                                    break;\n\n                                default:\n                                    i.val(i.attr('defaultValue'));\n                                    break;\n\n                            }\n                        });\n\n                });\n\n        return $this;\n\n    };\n\n    /**\n     * Moves elements to/from the first positions of their respective parents.\n     * @param {jQuery} $elements Elements (or selector) to move.\n     * @param {bool} condition If true, moves elements to the top. Otherwise, moves elements back to their original locations.\n     */\n    $.prioritize = function($elements, condition) {\n\n        var key = '__prioritize';\n\n        // Expand $elements if it's not already a jQuery object.\n            if (typeof $elements != 'jQuery')\n                $elements = $($elements);\n\n        // Step through elements.\n            $elements.each(function() {\n\n                var $e = $(this), $p,\n                    $parent = $e.parent();\n\n                // No parent? Bail.\n                    if ($parent.length == 0)\n                        return;\n\n                // Not moved? Move it.\n                    if (!$e.data(key)) {\n\n                        // Condition is false? Bail.\n                            if (!condition)\n                                return;\n\n                        // Get placeholder (which will serve as our point of reference for when this element needs to move back).\n                            $p = $e.prev();\n\n                            // Couldn't find anything? Means this element's already at the top, so bail.\n                                if ($p.length == 0)\n                                    return;\n\n                        // Move element to top of parent.\n                            $e.prependTo($parent);\n\n                        // Mark element as moved.\n                            $e.data(key, $p);\n\n                    }\n\n                // Moved already?\n                    else {\n\n                        // Condition is true? Bail.\n                            if (condition)\n                                return;\n\n                        $p = $e.data(key);\n\n                        // Move element back to its original location (using our placeholder).\n                            $e.insertAfter($p);\n\n                        // Unmark element as moved.\n                            $e.removeData(key);\n\n                    }\n\n            });\n\n    };\n\n})(jQuery);//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9zcmMvbWFpbi93ZWJwYWNrL3NpdGUvdXRpbC5qcy5qcyIsInNvdXJjZXMiOlsid2VicGFjazovLy8uL3NyYy9tYWluL3dlYnBhY2svc2l0ZS91dGlsLmpzPzIyNDciXSwic291cmNlc0NvbnRlbnQiOlsiLypcbiAqICBDb3B5cmlnaHQgMjAxOCBBZG9iZSBTeXN0ZW1zIEluY29ycG9yYXRlZFxuICpcbiAqICBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xuICogIHlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2Ugd2l0aCB0aGUgTGljZW5zZS5cbiAqICBZb3UgbWF5IG9idGFpbiBhIGNvcHkgb2YgdGhlIExpY2Vuc2UgYXRcbiAqXG4gKiAgICAgIGh0dHA6Ly93d3cuYXBhY2hlLm9yZy9saWNlbnNlcy9MSUNFTlNFLTIuMFxuICpcbiAqICBVbmxlc3MgcmVxdWlyZWQgYnkgYXBwbGljYWJsZSBsYXcgb3IgYWdyZWVkIHRvIGluIHdyaXRpbmcsIHNvZnR3YXJlXG4gKiAgZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxuICogIFdJVEhPVVQgV0FSUkFOVElFUyBPUiBDT05ESVRJT05TIE9GIEFOWSBLSU5ELCBlaXRoZXIgZXhwcmVzcyBvciBpbXBsaWVkLlxuICogIFNlZSB0aGUgTGljZW5zZSBmb3IgdGhlIHNwZWNpZmljIGxhbmd1YWdlIGdvdmVybmluZyBwZXJtaXNzaW9ucyBhbmRcbiAqICBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cbiAqL1xuLyogbW9kaWZpZWQgZnJvbSBodG1sNXVwLm5ldCB0aGFua3MgQGFqbGtuICovXG5cbnZhciBqUXVlcnkgPSByZXF1aXJlKFwianF1ZXJ5XCIpO1xuKGZ1bmN0aW9uKCQpIHtcblxuICAgIC8qIGFkZGluZyBzcGVjaWFsIGhhbmRsZXJzIGZvciBwYXNzaXZlIGV2ZW50cyBodHRwczovL2dpdGh1Yi5jb20vV0lDRy9FdmVudExpc3RlbmVyT3B0aW9ucyAqL1xuXG4gICAgalF1ZXJ5LmV2ZW50LnNwZWNpYWwudG91Y2hzdGFydCA9IHtcblx0XHRzZXR1cDogZnVuY3Rpb24oIF8sIG5zLCBoYW5kbGUgKXtcblx0XHRcdGlmICggbnMuaW5jbHVkZXMoXCJub1ByZXZlbnREZWZhdWx0XCIpICkge1xuXHRcdFx0ICB0aGlzLmFkZEV2ZW50TGlzdGVuZXIoXCJ0b3VjaHN0YXJ0XCIsIGhhbmRsZSwgeyBwYXNzaXZlOiB0cnVlIH0pO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0fVxuXHRcdH1cbiAgICB9O1xuXG4gICAgalF1ZXJ5LmV2ZW50LnNwZWNpYWwudG91Y2htb3ZlID0ge1xuXHRcdHNldHVwOiBmdW5jdGlvbiggXywgbnMsIGhhbmRsZSApe1xuXHRcdFx0aWYgKCBucy5pbmNsdWRlcyhcIm5vUHJldmVudERlZmF1bHRcIikgKSB7XG5cdFx0XHQgIHRoaXMuYWRkRXZlbnRMaXN0ZW5lcihcInRvdWNobW92ZVwiLCBoYW5kbGUsIHsgcGFzc2l2ZTogdHJ1ZSB9KTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHJldHVybiBmYWxzZTtcblx0XHRcdH1cblx0XHR9XG4gICAgfTtcbiAgICBcbiAgICAvKipcbiAgICAgKiBHZW5lcmF0ZSBhbiBpbmRlbnRlZCBsaXN0IG9mIGxpbmtzIGZyb20gYSBuYXYuIE1lYW50IGZvciB1c2Ugd2l0aCBwYW5lbCgpLlxuICAgICAqIEByZXR1cm4ge2pRdWVyeX0galF1ZXJ5IG9iamVjdC5cbiAgICAgKi9cbiAgICAkLmZuLm5hdkxpc3QgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICB2YXIgJHRoaXMgPSAkKHRoaXMpO1xuICAgICAgICAgICAgJGEgPSAkdGhpcy5maW5kKCdhJyksXG4gICAgICAgICAgICBiID0gW107XG5cbiAgICAgICAgJGEuZWFjaChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICBpbmRlbnQgPSBNYXRoLm1heCgwLCAkdGhpcy5wYXJlbnRzKCdsaScpLmxlbmd0aCAtIDEpLFxuICAgICAgICAgICAgICAgIGhyZWYgPSAkdGhpcy5hdHRyKCdocmVmJyksXG4gICAgICAgICAgICAgICAgdGFyZ2V0ID0gJHRoaXMuYXR0cigndGFyZ2V0Jyk7XG5cbiAgICAgICAgICAgIGIucHVzaChcbiAgICAgICAgICAgICAgICAnPGEgJyArXG4gICAgICAgICAgICAgICAgICAgICdjbGFzcz1cImxpbmsgZGVwdGgtJyArIGluZGVudCArICdcIicgK1xuICAgICAgICAgICAgICAgICAgICAoICh0eXBlb2YgdGFyZ2V0ICE9PSAndW5kZWZpbmVkJyAmJiB0YXJnZXQgIT0gJycpID8gJyB0YXJnZXQ9XCInICsgdGFyZ2V0ICsgJ1wiJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgICAgICggKHR5cGVvZiBocmVmICE9PSAndW5kZWZpbmVkJyAmJiBocmVmICE9ICcnKSA/ICcgaHJlZj1cIicgKyBocmVmICsgJ1wiJyA6ICcnKSArXG4gICAgICAgICAgICAgICAgJz4nICtcbiAgICAgICAgICAgICAgICAgICAgJzxzcGFuIGNsYXNzPVwiaW5kZW50LScgKyBpbmRlbnQgKyAnXCI+PC9zcGFuPicgK1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy50ZXh0KCkgK1xuICAgICAgICAgICAgICAgICc8L2E+J1xuICAgICAgICAgICAgKTtcblxuICAgICAgICB9KTtcblxuICAgICAgICByZXR1cm4gYi5qb2luKCcnKTtcblxuICAgIH07XG5cbiAgICAvKipcbiAgICAgKiBQYW5lbC1pZnkgYW4gZWxlbWVudC5cbiAgICAgKiBAcGFyYW0ge29iamVjdH0gdXNlckNvbmZpZyBVc2VyIGNvbmZpZy5cbiAgICAgKiBAcmV0dXJuIHtqUXVlcnl9IGpRdWVyeSBvYmplY3QuXG4gICAgICovXG4gICAgJC5mbi5wYW5lbCA9IGZ1bmN0aW9uKHVzZXJDb25maWcpIHtcblxuICAgICAgICAvLyBObyBlbGVtZW50cz9cbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgICAgIHJldHVybiAkdGhpcztcblxuICAgICAgICAvLyBNdWx0aXBsZSBlbGVtZW50cz9cbiAgICAgICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IDEpIHtcblxuICAgICAgICAgICAgICAgIGZvciAodmFyIGk9MDsgaSA8IHRoaXMubGVuZ3RoOyBpKyspXG4gICAgICAgICAgICAgICAgICAgICQodGhpc1tpXSkucGFuZWwodXNlckNvbmZpZyk7XG5cbiAgICAgICAgICAgICAgICByZXR1cm4gJHRoaXM7XG5cbiAgICAgICAgICAgIH1cblxuICAgICAgICAvLyBWYXJzLlxuICAgICAgICAgICAgdmFyICR0aGlzID0gJCh0aGlzKSxcbiAgICAgICAgICAgICAgICAkYm9keSA9ICQoJ2JvZHknKSxcbiAgICAgICAgICAgICAgICAkd2luZG93ID0gJCh3aW5kb3cpLFxuICAgICAgICAgICAgICAgIGlkID0gJHRoaXMuYXR0cignaWQnKSxcbiAgICAgICAgICAgICAgICBjb25maWc7XG5cbiAgICAgICAgLy8gQ29uZmlnLlxuICAgICAgICAgICAgY29uZmlnID0gJC5leHRlbmQoe1xuXG4gICAgICAgICAgICAgICAgLy8gRGVsYXkuXG4gICAgICAgICAgICAgICAgICAgIGRlbGF5OiAwLFxuXG4gICAgICAgICAgICAgICAgLy8gSGlkZSBwYW5lbCBvbiBsaW5rIGNsaWNrLlxuICAgICAgICAgICAgICAgICAgICBoaWRlT25DbGljazogZmFsc2UsXG5cbiAgICAgICAgICAgICAgICAvLyBIaWRlIHBhbmVsIG9uIGVzY2FwZSBrZXlwcmVzcy5cbiAgICAgICAgICAgICAgICAgICAgaGlkZU9uRXNjYXBlOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgIC8vIEhpZGUgcGFuZWwgb24gc3dpcGUuXG4gICAgICAgICAgICAgICAgICAgIGhpZGVPblN3aXBlOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgIC8vIFJlc2V0IHNjcm9sbCBwb3NpdGlvbiBvbiBoaWRlLlxuICAgICAgICAgICAgICAgICAgICByZXNldFNjcm9sbDogZmFsc2UsXG5cbiAgICAgICAgICAgICAgICAvLyBSZXNldCBmb3JtcyBvbiBoaWRlLlxuICAgICAgICAgICAgICAgICAgICByZXNldEZvcm1zOiBmYWxzZSxcblxuICAgICAgICAgICAgICAgIC8vIFNpZGUgb2Ygdmlld3BvcnQgdGhlIHBhbmVsIHdpbGwgYXBwZWFyLlxuICAgICAgICAgICAgICAgICAgICBzaWRlOiBudWxsLFxuXG4gICAgICAgICAgICAgICAgLy8gVGFyZ2V0IGVsZW1lbnQgZm9yIFwiY2xhc3NcIi5cbiAgICAgICAgICAgICAgICAgICAgdGFyZ2V0OiAkdGhpcyxcblxuICAgICAgICAgICAgICAgIC8vIENsYXNzIHRvIHRvZ2dsZS5cbiAgICAgICAgICAgICAgICAgICAgdmlzaWJsZUNsYXNzOiAndmlzaWJsZSdcblxuICAgICAgICAgICAgfSwgdXNlckNvbmZpZyk7XG5cbiAgICAgICAgICAgIC8vIEV4cGFuZCBcInRhcmdldFwiIGlmIGl0J3Mgbm90IGEgalF1ZXJ5IG9iamVjdCBhbHJlYWR5LlxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uZmlnLnRhcmdldCAhPSAnalF1ZXJ5JylcbiAgICAgICAgICAgICAgICAgICAgY29uZmlnLnRhcmdldCA9ICQoY29uZmlnLnRhcmdldCk7XG5cbiAgICAgICAgLy8gUGFuZWwuXG5cbiAgICAgICAgICAgIC8vIE1ldGhvZHMuXG4gICAgICAgICAgICAgICAgJHRoaXMuX2hpZGUgPSBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIEFscmVhZHkgaGlkZGVuPyBCYWlsLlxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFjb25maWcudGFyZ2V0Lmhhc0NsYXNzKGNvbmZpZy52aXNpYmxlQ2xhc3MpKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBhbiBldmVudCB3YXMgcHJvdmlkZWQsIGNhbmNlbCBpdC5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgIC8vIEhpZGUuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25maWcudGFyZ2V0LnJlbW92ZUNsYXNzKGNvbmZpZy52aXNpYmxlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgICAgIC8vIFBvc3QtaGlkZSBzdHVmZi5cbiAgICAgICAgICAgICAgICAgICAgICAgIHdpbmRvdy5zZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgc2Nyb2xsIHBvc2l0aW9uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZmlnLnJlc2V0U2Nyb2xsKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJHRoaXMuc2Nyb2xsVG9wKDApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVzZXQgZm9ybXMuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcucmVzZXRGb3JtcylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLmZpbmQoJ2Zvcm0nKS5lYWNoKGZ1bmN0aW9uKCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCBjb25maWcuZGVsYXkpO1xuXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy8gVmVuZG9yIGZpeGVzLlxuICAgICAgICAgICAgICAgICR0aGlzXG4gICAgICAgICAgICAgICAgICAgIC5jc3MoJy1tcy1vdmVyZmxvdy1zdHlsZScsICctbXMtYXV0b2hpZGluZy1zY3JvbGxiYXInKVxuICAgICAgICAgICAgICAgICAgICAuY3NzKCctd2Via2l0LW92ZXJmbG93LXNjcm9sbGluZycsICd0b3VjaCcpO1xuXG4gICAgICAgICAgICAvLyBIaWRlIG9uIGNsaWNrLlxuICAgICAgICAgICAgICAgIGlmIChjb25maWcuaGlkZU9uQ2xpY2spIHtcblxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdhJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5jc3MoJy13ZWJraXQtdGFwLWhpZ2hsaWdodC1jb2xvcicsICdyZ2JhKDAsMCwwLDApJyk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHRoaXNcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignY2xpY2snLCAnYScsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgJGEgPSAkKHRoaXMpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBocmVmID0gJGEuYXR0cignaHJlZicpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0YXJnZXQgPSAkYS5hdHRyKCd0YXJnZXQnKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICghaHJlZiB8fCBocmVmID09ICcjJyB8fCBocmVmID09ICcnIHx8IGhyZWYgPT0gJyMnICsgaWQpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENhbmNlbCBvcmlnaW5hbCBldmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBIaWRlIHBhbmVsLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5faGlkZSgpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVkaXJlY3QgdG8gaHJlZi5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LnNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0YXJnZXQgPT0gJ19ibGFuaycpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93Lm9wZW4oaHJlZik7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSBocmVmO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sIGNvbmZpZy5kZWxheSArIDEwKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgIC8vIEV2ZW50OiBUb3VjaCBzdHVmZi5cbiAgICAgICAgICAgICAgICAkdGhpcy5vbigndG91Y2hzdGFydC5ub1ByZXZlbnREZWZhdWx0JywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICR0aGlzLnRvdWNoUG9zWCA9IGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWDtcbiAgICAgICAgICAgICAgICAgICAgJHRoaXMudG91Y2hQb3NZID0gZXZlbnQub3JpZ2luYWxFdmVudC50b3VjaGVzWzBdLnBhZ2VZO1xuXG4gICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICBcbiAgICAgICAgICAgICAgICAkdGhpcy5vbigndG91Y2htb3ZlLm5vUHJldmVudERlZmF1bHQnLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGlmICgkdGhpcy50b3VjaFBvc1ggPT09IG51bGxcbiAgICAgICAgICAgICAgICAgICAgfHwgICR0aGlzLnRvdWNoUG9zWSA9PT0gbnVsbClcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgZGlmZlggPSAkdGhpcy50b3VjaFBvc1ggLSBldmVudC5vcmlnaW5hbEV2ZW50LnRvdWNoZXNbMF0ucGFnZVgsXG4gICAgICAgICAgICAgICAgICAgICAgICBkaWZmWSA9ICR0aGlzLnRvdWNoUG9zWSAtIGV2ZW50Lm9yaWdpbmFsRXZlbnQudG91Y2hlc1swXS5wYWdlWSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoID0gJHRoaXMub3V0ZXJIZWlnaHQoKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHRzID0gKCR0aGlzLmdldCgwKS5zY3JvbGxIZWlnaHQgLSAkdGhpcy5zY3JvbGxUb3AoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gSGlkZSBvbiBzd2lwZT9cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb25maWcuaGlkZU9uU3dpcGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciByZXN1bHQgPSBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm91bmRhcnkgPSAyMCxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsdGEgPSA1MDtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY29uZmlnLnNpZGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdsZWZ0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChkaWZmWSA8IGJvdW5kYXJ5ICYmIGRpZmZZID4gKC0xICogYm91bmRhcnkpKSAmJiAoZGlmZlggPiBkZWx0YSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyaWdodCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoZGlmZlkgPCBib3VuZGFyeSAmJiBkaWZmWSA+ICgtMSAqIGJvdW5kYXJ5KSkgJiYgKGRpZmZYIDwgKC0xICogZGVsdGEpKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ3RvcCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHQgPSAoZGlmZlggPCBib3VuZGFyeSAmJiBkaWZmWCA+ICgtMSAqIGJvdW5kYXJ5KSkgJiYgKGRpZmZZID4gZGVsdGEpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnYm90dG9tJzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IChkaWZmWCA8IGJvdW5kYXJ5ICYmIGRpZmZYID4gKC0xICogYm91bmRhcnkpKSAmJiAoZGlmZlkgPCAoLTEgKiBkZWx0YSkpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRvdWNoUG9zWCA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLnRvdWNoUG9zWSA9IG51bGw7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICR0aGlzLl9oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCB2ZXJ0aWNhbCBzY3JvbGxpbmcgcGFzdCB0aGUgdG9wIG9yIGJvdHRvbS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgoJHRoaXMuc2Nyb2xsVG9wKCkgPCAwICYmIGRpZmZZIDwgMClcbiAgICAgICAgICAgICAgICAgICAgICAgIHx8ICh0cyA+ICh0aCAtIDIpICYmIHRzIDwgKHRoICsgMikgJiYgZGlmZlkgPiAwKSkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAvLyBFdmVudDogUHJldmVudCBjZXJ0YWluIGV2ZW50cyBpbnNpZGUgdGhlIHBhbmVsIGZyb20gYnViYmxpbmcuXG4gICAgICAgICAgICAgICAgJHRoaXMub24oJ2NsaWNrIHRvdWNoZW5kIHRvdWNoc3RhcnQgdG91Y2htb3ZlJywgZnVuY3Rpb24oZXZlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEV2ZW50OiBIaWRlIHBhbmVsIGlmIGEgY2hpbGQgYW5jaG9yIHRhZyBwb2ludGluZyB0byBpdHMgSUQgaXMgY2xpY2tlZC5cbiAgICAgICAgICAgICAgICAkdGhpcy5vbignY2xpY2snLCAnYVtocmVmPVwiIycgKyBpZCArICdcIl0nLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgIGV2ZW50LnN0b3BQcm9wYWdhdGlvbigpO1xuXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZy50YXJnZXQucmVtb3ZlQ2xhc3MoY29uZmlnLnZpc2libGVDbGFzcyk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBCb2R5LlxuXG4gICAgICAgICAgICAvLyBFdmVudDogSGlkZSBwYW5lbCBvbiBib2R5IGNsaWNrL3RhcC5cbiAgICAgICAgICAgICAgICAkYm9keS5vbignY2xpY2sgdG91Y2hlbmQnLCBmdW5jdGlvbihldmVudCkge1xuICAgICAgICAgICAgICAgICAgICAkdGhpcy5faGlkZShldmVudCk7XG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgIC8vIEV2ZW50OiBUb2dnbGUuXG4gICAgICAgICAgICAgICAgJGJvZHkub24oJ2NsaWNrJywgJ2FbaHJlZj1cIiMnICsgaWQgKyAnXCJdJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgICAgICAgICBldmVudC5zdG9wUHJvcGFnYXRpb24oKTtcblxuICAgICAgICAgICAgICAgICAgICBjb25maWcudGFyZ2V0LnRvZ2dsZUNsYXNzKGNvbmZpZy52aXNpYmxlQ2xhc3MpO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgLy8gV2luZG93LlxuXG4gICAgICAgICAgICAvLyBFdmVudDogSGlkZSBvbiBFU0MuXG4gICAgICAgICAgICAgICAgaWYgKGNvbmZpZy5oaWRlT25Fc2NhcGUpXG4gICAgICAgICAgICAgICAgICAgICR3aW5kb3cub24oJ2tleWRvd24nLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZXZlbnQua2V5Q29kZSA9PSAyNylcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy5faGlkZShldmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuICR0aGlzO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIEFwcGx5IFwicGxhY2Vob2xkZXJcIiBhdHRyaWJ1dGUgcG9seWZpbGwgdG8gb25lIG9yIG1vcmUgZm9ybXMuXG4gICAgICogQHJldHVybiB7alF1ZXJ5fSBqUXVlcnkgb2JqZWN0LlxuICAgICAqL1xuICAgICQuZm4ucGxhY2Vob2xkZXIgPSBmdW5jdGlvbigpIHtcblxuICAgICAgICAvLyBCcm93c2VyIG5hdGl2ZWx5IHN1cHBvcnRzIHBsYWNlaG9sZGVycz8gQmFpbC5cbiAgICAgICAgICAgIGlmICh0eXBlb2YgKGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0JykpLnBsYWNlaG9sZGVyICE9ICd1bmRlZmluZWQnKVxuICAgICAgICAgICAgICAgIHJldHVybiAkKHRoaXMpO1xuXG4gICAgICAgIC8vIE5vIGVsZW1lbnRzP1xuICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzO1xuXG4gICAgICAgIC8vIE11bHRpcGxlIGVsZW1lbnRzP1xuICAgICAgICAgICAgaWYgKHRoaXMubGVuZ3RoID4gMSkge1xuXG4gICAgICAgICAgICAgICAgZm9yICh2YXIgaT0wOyBpIDwgdGhpcy5sZW5ndGg7IGkrKylcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzW2ldKS5wbGFjZWhvbGRlcigpO1xuXG4gICAgICAgICAgICAgICAgcmV0dXJuICR0aGlzO1xuXG4gICAgICAgICAgICB9XG5cbiAgICAgICAgLy8gVmFycy5cbiAgICAgICAgICAgIHZhciAkdGhpcyA9ICQodGhpcyk7XG5cbiAgICAgICAgLy8gVGV4dCwgVGV4dEFyZWEuXG4gICAgICAgICAgICAkdGhpcy5maW5kKCdpbnB1dFt0eXBlPXRleHRdLHRleHRhcmVhJylcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkudmFsKCkgPT0gJydcbiAgICAgICAgICAgICAgICAgICAgfHwgIGkudmFsKCkgPT0gaS5hdHRyKCdwbGFjZWhvbGRlcicpKVxuICAgICAgICAgICAgICAgICAgICAgICAgaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygncG9seWZpbGwtcGxhY2Vob2xkZXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoaS5hdHRyKCdwbGFjZWhvbGRlcicpKTtcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdibHVyJywgZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgdmFyIGkgPSAkKHRoaXMpO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpLmF0dHIoJ25hbWUnKS5tYXRjaCgvLXBvbHlmaWxsLWZpZWxkJC8pKVxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpLnZhbCgpID09ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgaVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcygncG9seWZpbGwtcGxhY2Vob2xkZXInKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC52YWwoaS5hdHRyKCdwbGFjZWhvbGRlcicpKTtcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdmb2N1cycsIGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgICAgIHZhciBpID0gJCh0aGlzKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaS5hdHRyKCduYW1lJykubWF0Y2goLy1wb2x5ZmlsbC1maWVsZCQvKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaS52YWwoKSA9PSBpLmF0dHIoJ3BsYWNlaG9sZGVyJykpXG4gICAgICAgICAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKCdwb2x5ZmlsbC1wbGFjZWhvbGRlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnZhbCgnJyk7XG5cbiAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAvLyBQYXNzd29yZC5cbiAgICAgICAgICAgICR0aGlzLmZpbmQoJ2lucHV0W3R5cGU9cGFzc3dvcmRdJylcbiAgICAgICAgICAgICAgICAuZWFjaChmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICQodGhpcyk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB4ID0gJChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJCgnPGRpdj4nKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmFwcGVuZChpLmNsb25lKCkpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVtb3ZlKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5odG1sKClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5yZXBsYWNlKC90eXBlPVwicGFzc3dvcmRcIi9pLCAndHlwZT1cInRleHRcIicpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAucmVwbGFjZSgvdHlwZT1wYXNzd29yZC9pLCAndHlwZT10ZXh0JylcbiAgICAgICAgICAgICAgICAgICAgKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaS5hdHRyKCdpZCcpICE9ICcnKVxuICAgICAgICAgICAgICAgICAgICAgICAgeC5hdHRyKCdpZCcsIGkuYXR0cignaWQnKSArICctcG9seWZpbGwtZmllbGQnKTtcblxuICAgICAgICAgICAgICAgICAgICBpZiAoaS5hdHRyKCduYW1lJykgIT0gJycpXG4gICAgICAgICAgICAgICAgICAgICAgICB4LmF0dHIoJ25hbWUnLCBpLmF0dHIoJ25hbWUnKSArICctcG9seWZpbGwtZmllbGQnKTtcblxuICAgICAgICAgICAgICAgICAgICB4LmFkZENsYXNzKCdwb2x5ZmlsbC1wbGFjZWhvbGRlcicpXG4gICAgICAgICAgICAgICAgICAgICAgICAudmFsKHguYXR0cigncGxhY2Vob2xkZXInKSkuaW5zZXJ0QWZ0ZXIoaSk7XG5cbiAgICAgICAgICAgICAgICAgICAgaWYgKGkudmFsKCkgPT0gJycpXG4gICAgICAgICAgICAgICAgICAgICAgICBpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgZWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgeC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgaVxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uKCdibHVyJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgeCA9IGkucGFyZW50KCkuZmluZCgnaW5wdXRbbmFtZT0nICsgaS5hdHRyKCduYW1lJykgKyAnLXBvbHlmaWxsLWZpZWxkXScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkudmFsKCkgPT0gJycpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLmhpZGUoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5zaG93KCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgICAgIHhcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbignZm9jdXMnLCBmdW5jdGlvbihldmVudCkge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpID0geC5wYXJlbnQoKS5maW5kKCdpbnB1dFtuYW1lPScgKyB4LmF0dHIoJ25hbWUnKS5yZXBsYWNlKCctcG9seWZpbGwtZmllbGQnLCAnJykgKyAnXScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5oaWRlKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zaG93KClcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLmZvY3VzKCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgICAgICAub24oJ2tleXByZXNzJywgZnVuY3Rpb24oZXZlbnQpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgeC52YWwoJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgIC8vIEV2ZW50cy5cbiAgICAgICAgICAgICR0aGlzXG4gICAgICAgICAgICAgICAgLm9uKCdzdWJtaXQnLCBmdW5jdGlvbigpIHtcblxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdpbnB1dFt0eXBlPXRleHRdLGlucHV0W3R5cGU9cGFzc3dvcmRdLHRleHRhcmVhJylcbiAgICAgICAgICAgICAgICAgICAgICAgIC5lYWNoKGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICQodGhpcyk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaS5hdHRyKCduYW1lJykubWF0Y2goLy1wb2x5ZmlsbC1maWVsZCQvKSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5hdHRyKCduYW1lJywgJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGkudmFsKCkgPT0gaS5hdHRyKCdwbGFjZWhvbGRlcicpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5yZW1vdmVDbGFzcygncG9seWZpbGwtcGxhY2Vob2xkZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS52YWwoJycpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgLm9uKCdyZXNldCcsIGZ1bmN0aW9uKGV2ZW50KSB7XG5cbiAgICAgICAgICAgICAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcblxuICAgICAgICAgICAgICAgICAgICAkdGhpcy5maW5kKCdzZWxlY3QnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLnZhbCgkKCdvcHRpb246Zmlyc3QnKS52YWwoKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgJHRoaXMuZmluZCgnaW5wdXQsdGV4dGFyZWEnKVxuICAgICAgICAgICAgICAgICAgICAgICAgLmVhY2goZnVuY3Rpb24oKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgaSA9ICQodGhpcyksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHg7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnJlbW92ZUNsYXNzKCdwb2x5ZmlsbC1wbGFjZWhvbGRlcicpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdzdWJtaXQnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdyZXNldCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdwYXNzd29yZCc6XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnZhbChpLmF0dHIoJ2RlZmF1bHRWYWx1ZScpKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeCA9IGkucGFyZW50KCkuZmluZCgnaW5wdXRbbmFtZT0nICsgaS5hdHRyKCduYW1lJykgKyAnLXBvbHlmaWxsLWZpZWxkXScpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoaS52YWwoKSA9PSAnJykge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkuaGlkZSgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguc2hvdygpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5zaG93KCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgeC5oaWRlKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2NoZWNrYm94JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAncmFkaW8nOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5hdHRyKCdjaGVja2VkJywgaS5hdHRyKCdkZWZhdWx0VmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0ZXh0JzpcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAndGV4dGFyZWEnOlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS52YWwoaS5hdHRyKCdkZWZhdWx0VmFsdWUnKSk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChpLnZhbCgpID09ICcnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS5hZGRDbGFzcygncG9seWZpbGwtcGxhY2Vob2xkZXInKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpLnZhbChpLmF0dHIoJ3BsYWNlaG9sZGVyJykpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaS52YWwoaS5hdHRyKCdkZWZhdWx0VmFsdWUnKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgcmV0dXJuICR0aGlzO1xuXG4gICAgfTtcblxuICAgIC8qKlxuICAgICAqIE1vdmVzIGVsZW1lbnRzIHRvL2Zyb20gdGhlIGZpcnN0IHBvc2l0aW9ucyBvZiB0aGVpciByZXNwZWN0aXZlIHBhcmVudHMuXG4gICAgICogQHBhcmFtIHtqUXVlcnl9ICRlbGVtZW50cyBFbGVtZW50cyAob3Igc2VsZWN0b3IpIHRvIG1vdmUuXG4gICAgICogQHBhcmFtIHtib29sfSBjb25kaXRpb24gSWYgdHJ1ZSwgbW92ZXMgZWxlbWVudHMgdG8gdGhlIHRvcC4gT3RoZXJ3aXNlLCBtb3ZlcyBlbGVtZW50cyBiYWNrIHRvIHRoZWlyIG9yaWdpbmFsIGxvY2F0aW9ucy5cbiAgICAgKi9cbiAgICAkLnByaW9yaXRpemUgPSBmdW5jdGlvbigkZWxlbWVudHMsIGNvbmRpdGlvbikge1xuXG4gICAgICAgIHZhciBrZXkgPSAnX19wcmlvcml0aXplJztcblxuICAgICAgICAvLyBFeHBhbmQgJGVsZW1lbnRzIGlmIGl0J3Mgbm90IGFscmVhZHkgYSBqUXVlcnkgb2JqZWN0LlxuICAgICAgICAgICAgaWYgKHR5cGVvZiAkZWxlbWVudHMgIT0gJ2pRdWVyeScpXG4gICAgICAgICAgICAgICAgJGVsZW1lbnRzID0gJCgkZWxlbWVudHMpO1xuXG4gICAgICAgIC8vIFN0ZXAgdGhyb3VnaCBlbGVtZW50cy5cbiAgICAgICAgICAgICRlbGVtZW50cy5lYWNoKGZ1bmN0aW9uKCkge1xuXG4gICAgICAgICAgICAgICAgdmFyICRlID0gJCh0aGlzKSwgJHAsXG4gICAgICAgICAgICAgICAgICAgICRwYXJlbnQgPSAkZS5wYXJlbnQoKTtcblxuICAgICAgICAgICAgICAgIC8vIE5vIHBhcmVudD8gQmFpbC5cbiAgICAgICAgICAgICAgICAgICAgaWYgKCRwYXJlbnQubGVuZ3RoID09IDApXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAvLyBOb3QgbW92ZWQ/IE1vdmUgaXQuXG4gICAgICAgICAgICAgICAgICAgIGlmICghJGUuZGF0YShrZXkpKSB7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvbmRpdGlvbiBpcyBmYWxzZT8gQmFpbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoIWNvbmRpdGlvbilcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBHZXQgcGxhY2Vob2xkZXIgKHdoaWNoIHdpbGwgc2VydmUgYXMgb3VyIHBvaW50IG9mIHJlZmVyZW5jZSBmb3Igd2hlbiB0aGlzIGVsZW1lbnQgbmVlZHMgdG8gbW92ZSBiYWNrKS5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkcCA9ICRlLnByZXYoKTtcblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvdWxkbid0IGZpbmQgYW55dGhpbmc/IE1lYW5zIHRoaXMgZWxlbWVudCdzIGFscmVhZHkgYXQgdGhlIHRvcCwgc28gYmFpbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCRwLmxlbmd0aCA9PSAwKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIGVsZW1lbnQgdG8gdG9wIG9mIHBhcmVudC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5wcmVwZW5kVG8oJHBhcmVudCk7XG5cbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIE1hcmsgZWxlbWVudCBhcyBtb3ZlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5kYXRhKGtleSwgJHApO1xuXG4gICAgICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIC8vIE1vdmVkIGFscmVhZHk/XG4gICAgICAgICAgICAgICAgICAgIGVsc2Uge1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDb25kaXRpb24gaXMgdHJ1ZT8gQmFpbC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29uZGl0aW9uKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXR1cm47XG5cbiAgICAgICAgICAgICAgICAgICAgICAgICRwID0gJGUuZGF0YShrZXkpO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIGVsZW1lbnQgYmFjayB0byBpdHMgb3JpZ2luYWwgbG9jYXRpb24gKHVzaW5nIG91ciBwbGFjZWhvbGRlcikuXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgJGUuaW5zZXJ0QWZ0ZXIoJHApO1xuXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBVbm1hcmsgZWxlbWVudCBhcyBtb3ZlZC5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAkZS5yZW1vdmVEYXRhKGtleSk7XG5cbiAgICAgICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICB9KTtcblxuICAgIH07XG5cbn0pKGpRdWVyeSk7Il0sIm1hcHBpbmdzIjoiQUFBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///./src/main/webpack/site/util.js\n");

/***/ })

/******/ });
